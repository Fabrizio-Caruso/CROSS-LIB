######################################################################
# Common Makefile


SOURCE_PATH := $(PARENT_DIR)/$(GAME_NAME)

#-D_DEFAULT_ASCII
DEFAULT_ASCII=

GLOBAL_OPTS ?= $(DEFAULT_ASCII)  $(COMPILER_OPTS) $(PROJECT_OPTS) 
# 
#-D_BACKGROUND_COLOR=1



#######################################################################
# Use parameters (env variables) to modify compilation parameters

SCCZ80_OPTS ?=  $(GLOBAL_OPTS) $(Z88DK_MAKEFILE_COMPILATION_OPTS)
#-O0
#-O3

SCCZ80_ROM_OPTS ?= $(GLOBAL_OPTS) $(Z88DK_MAKEFILE_COMPILATION_OPTS)
#-O0
#-O3

ZSDCC_OPTS ?=  $(ZSDCC_MAKEFILE_COMPILATION_OPTS) $(GLOBAL_OPTS)
# -SO2
#-SO0
# -SO3 --max-allocs-per-node200000

ZSDCC_ROM_OPTS ?= $(ZSDCC_MAKEFILE_COMPILATION_OPTS) $(GLOBAL_OPTS)
# -SO3
# -SO3 --max-allocs-per-node200000

Z88DK_MAKE_OPTS ?= $(ZSDCC_MAKEFILE_THREADS_OPTS)
#-j 8

######################################################################
# Cross-Shoot files
#


SCCZ80_OPTS ?= -O0


# Parallel compilation for Z88DK targets
# Z88DK_MAKE_OPTS ?= -j 8



####################################################################################################################
# COMMON INCLUDES

include makefiles.common/auxiliary/Makefile_ALL



#################################################################
#    Grouped Targets 

ifeq ($(DO_WIN),1)
all: \
    gcc_targets \
    cc65_targets \
    cmoc_targets \
    lcc1802_targets \
    z88dk_targets
	
C1541 = ../tools/generic/c1541.exe
else
all: \
    gcc_targets \
    cc65_targets \
    cmoc_targets \
    z88dk_targets
	
C1541 = c1541
endif

gcc_targets: \
	ncurses  

ifeq ($(DO_WIN),1)
cc65_targets: \
    apple2 \
    apple2enh \
    atari \
    atari_lynx \
    atari5200 \
    atari7800 \
    c16 \
    c64 \
    creativision \
    gamate \
    oric  \
    nes \
    pet \
    pce \
    supervision \
    vic20 
else
cc65_targets: \
    apple2 \
    apple2enh \
    atari \
    atari_lynx \
    atari5200 \
    atari7800 \
    c16 \
    c64 \
    creativision \
    gamate \
    oric  \
    nes \
    pet \
    pce \
    supervision \
    vic20 
endif

cmoc_targets: \
    mo5_targets \
    to7_targets \
    coco_targets

ifeq ($(DO_WIN),1)
z88dk_targets_sequential: \
    ace \
    agon \
    aquarius \
    cpc \
    c128_z80_40col \
    camputers_lynx \
    coleco \
    cpm \
    gb \
    laser500 \
    mc1000 \
    bee \
    msx \
    mtx500 \
    mtx512 \
    mz \
    pc88 \
    samcoupe \
    sc3000 \
    sc3000_rom \
    sg1000 \
    spectrum \
    vg5k \
    vz200 \
    zx81_wrx \
    zx81_8x6_wrx128 \
    zx81 \
    gg \
    sms
else
z88dk_targets_sequential: \
    aquarius \
    ace \
    agon \
    camputers_lynx \
    coleco \
    cpc \
    cpm \
    gb \
    laser500 \
    mc1000 \
    bee \
    msx \
    mtx500 \
    mtx512 \
    mz \
    pc88 \
    samcoupe \
    sc3000 \
    sc3000_rom \
    sg1000 \
    spectrum \
    vg5k \
    vz200 \
    zx81_wrx \
    zx81_8x6_wrx128 \
    zx81 \
    gg \
    sms
endif


z88dk_targets:
	$(MAKE) $(Z88DK_MAKE_OPTS) z88dk_targets_sequential -f ./$(PARENT_DIR)/$(GAME_NAME)/Makefile.$(GAME_NAME)


_lcc1802_6x9_targets: \
    _comx \
    _pecom \
    _micro

lcc1802_6x9_targets: \
    _lcc1802_6x9_targets \
    clean_combo_files

_lcc1802_6x8_targets: \
    _comx_ntsc

lcc1802_6x8_targets: \
    _lcc1802_6x8_targets \
    clean_combo_files
    
_lcc1802_ascii_targets: \
    _tmc600

lcc1802_ascii_targets: \
    _lcc1802_ascii_targets \
    clean_combo_files

lcc1802_targets: \
    _lcc1802_6x9_targets \
    _lcc1802_ascii_targets \
    clean_combo_files



#################################################################
# CC65

#################################################################

CC65_OPTS = $(GLOBAL_OPTS) $(CC65_MAKEFILE_COMPILATION_OPTS)

apple2: apple2_hgr

apple2_hgr: $(ASSETS_PATH)/7x8_chars.h
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t apple2 \
	--config $(CFG_PATH)/cc65/apple2-hgr.cfg \
	-D__ALT_SLEEP  $(APPLE2_GAME_OPTS) \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_APPLE2_HGR_SLOWDOWN) -DXSize=20 -DYSize=24 \
	-D__ALT_PRINT  \
	-D__APPLE2_HGR_GRAPHICS -D__DEFAULT_CLEAR_SCREEN \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/apple2/hgr.s \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	--code-name LOWCODE \
	$(CROSS_LIB_PATH)/sound/generic/bit_bang_sounds.c \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/apple2/apple2_hgr_init_graphics.c \
	-o $(BUILD_PATH)/$@.bin
ifdef USE_TOOLS
	cp $(TOOLS_PATH)/cc65/apple2/MASTER_BOOT_ASCHASE.DSK $(BUILD_PATH)/X$(GAME_NAME)_$@.dsk
	java -jar $(TOOLS_PATH)/cc65/apple2/ac.jar -as $(BUILD_PATH)/X$(GAME_NAME)_$@.dsk aschase < $(BUILD_PATH)/$@.bin
	rm -rf $(BUILD_PATH)/$@.bin
else
	mv $(BUILD_PATH)/$@.bin $(BUILD_PATH)/X$(GAME_NAME)_$@.bin
endif


#################################################################



apple2enh: apple2enh_hgr

apple2enh_hgr: $(ASSETS_PATH)/7x8_chars.h
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t apple2 \
	--config $(CFG_PATH)/cc65/apple2-hgr.cfg \
	 -D__ALT_SLEEP  $(APPLE2_GAME_OPTS) \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_APPLE2ENH_HGR_SLOWDOWN) -DXSize=20 -DYSize=24 \
	 -D__ALT_PRINT  \
	-D__APPLE2_HGR_GRAPHICS -D__DEFAULT_CLEAR_SCREEN \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/apple2/hgr.s \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	--code-name LOWCODE \
	$(CROSS_LIB_PATH)/sound/generic/bit_bang_sounds.c \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/apple2/apple2_hgr_init_graphics.c \
	-o $(BUILD_PATH)/$@.bin
ifdef USE_TOOLS
	cp $(TOOLS_PATH)/cc65/apple2/MASTER_BOOT_ASCHASE.DSK $(BUILD_PATH)/X$(GAME_NAME)_$@.dsk
	java -jar $(TOOLS_PATH)/cc65/apple2/ac.jar -as $(BUILD_PATH)/X$(GAME_NAME)_$@.dsk aschase < $(BUILD_PATH)/$@.bin
	rm -rf $(BUILD_PATH)/$@.bin
else
	mv $(BUILD_PATH)/$@.bin $(BUILD_PATH)/X$(GAME_NAME)_$@.bin
endif

#################################################################

atari: $(ASSETS_PATH)/8x8_chars.h
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t atari \
	 \
	$(ATARI_COLORS)  \
	--config $(CFG_PATH)/cc65/atari_mode1_redefined_chars.cfg \
	-D__ANTIC_MODE6_GRAPHICS -D__ALT_SLEEP  \
	-D__NO_SCREEN_COLOR_INIT \
	-D__ALT_PRINT \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ATARI_SLOWDOWN) \
	$(CROSS_LIB_PATH)/display/alt_print/atari_mode1_alt_print.c \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/atari/disable_setcursor.s \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/atari/atari_mode1_redefined_chars_init_graphics.c \
	$(CROSS_LIB_PATH)/sound/cc65/pokey/pokey_sounds.c \
	$(FULL_FILES) \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.xex


#################################################################

atari5200: $(ASSETS_PATH)/8x8_chars.h
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t atari5200 \
	--config $(CFG_PATH)/cc65/atari5200_redefined_chars_32k.cfg \
	-D__ATARI5200__  $(ATARI5200_COLORS) \
	-D__ANTIC_MODE6_GRAPHICS \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ATARI5200_SLOWDOWN) \
	$(CROSS_LIB_PATH)/sound/cc65/pokey/pokey_sounds.c \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/atari5200/atari5200_init_graphics.c \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.rom

#################################################################


atari_lynx: $(ASSETS_PATH)/8x6_tiles.s
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t lynx \
	-D__ATARI_LYNX__  -D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ATARI_LYNX_SLOWDOWN)  \
	-D__NO_SCREEN_COLOR_INIT  -DXSize=20 -DYSize=17 -D_XL_NUMBER_OF_TILES=27 \
	-D__LYNX_TGI_GRAPHICS \
	-D__ALT_PRINT \
	$(CROSS_LIB_PATH)/display/alt_print/tgi_gfx_print.c \
	$(CROSS_LIB_PATH)/sound/cc65/atari_lynx/atari_lynx_sounds.c \
	$(CROSS_LIB_PATH)/sound/cc65/atari_lynx/chibisound.asm \
	$(ASSETS_PATH)/8x6_tiles.s \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/atari_lynx/atari_lynx_gfx_init_graphics.c \
	$(FULL_FILES) \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.lnx


#################################################################

atari7800: 
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t atari7800 --force-import __EXEHDR__ \
	  -D_XL_NO_UDG -D__TARGET_SPECIFIC_ASCII \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS  -D__NO_SCREEN_COLOR_INIT -D__ALT_SLEEP \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ATARI7800_SLOWDOWN) -DXSize=20 -DYSize=28 \
	$(FULL_FILES) \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.a78


atari7800_debug: 
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t atari7800 --force-import __EXEHDR__   \
	  -D_XL_NO_UDG -D__TARGET_SPECIFIC_ASCII \
	-D__CONIO_GRAPHICS   -D__NO_SCREEN_COLOR_INIT -D__ALT_SLEEP  \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ATARI7800_SLOWDOWN) -DXSize=20 -DYSize=28 \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/atari7800/atari7800_init_graphics_debug.c \
	$(FULL_FILES) \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.a78

atari7800_test: $(ASSETS_PATH)/cc65_udc_atari7800_160A.s
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t atari7800 --force-import __EXEHDR__   \
	-D__ATARI7800_COLOR_GRAPHICS  -D__NO_SCREEN_COLOR_INIT -D__ALT_SLEEP -D__DEFAULT_CLEAR_SCREEN \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ATARI7800_SLOWDOWN) -DXSize=20 -DYSize=28 \
	-D__NO_INIT_GRAPHICS \
	$(FULL_FILES) \
	$(ASSETS_PATH)/cc65_udc_atari7800_160A.s \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.a78


atari7800_no_color: 
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t atari7800 --force-import __EXEHDR__ atari7800-mono.o \
	--config $(CFG_PATH)/cc65/atari7800_more_ram.cfg   -D_XL_NO_UDG -D_XL_NO_COLOR -D__TARGET_SPECIFIC_ASCII \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS  -D__NO_SCREEN_COLOR_INIT -D__ALT_SLEEP \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ATARI7800_NO_COLOR_SLOWDOWN) -DXSize=34 -DX_OFFSET=3 -DYSize=28 \
	$(FULL_FILES) \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.a78
    



#################################################################

c16: c16_32k

#  -m mapfile.txt
# --check-stack
# D__DEFAULT_CLEAR_SCREEN uses _SPACE=$60, which is correct but slow
# D__KERNAL_CLEAR_SCREEN uses a hard-coded $20 character, which is wrong in this case ($60 is needed)
# D__ASSEMBLY_CLEAR_SCREEN uses a hard-coded $60, which is correct
c16_16k: $(ASSETS_PATH)/cc65_udc_arcade_64_chars.s
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t c16 \
	--config $(CFG_PATH)/cc65/c16-16k_GFX_64chars_stack_0x30.cfg \
	-D__NO_SCREEN_COLOR_INIT  \
	-D__ALT_PRINT \
	-D__MEMORY_MAPPED_GRAPHICS \
	-D__ASSEMBLY_CLEAR_SCREEN \
	-D__ALT_SLEEP \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_C16_SLOWDOWN) \
	-D__UDG_BASE_FACTOR=15 \
	$(CROSS_LIB_PATH)/sound/cc65/c264/c264_sounds.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	$(FULL_FILES) \
	$(ASSETS_PATH)/cc65_udc_arcade_64_chars.s \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/c264/c16_linked_redefined_chars_init_graphics.c \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg


c16_16k_double_buffer: $(ASSETS_PATH)/cc65_udc_arcade_64_chars.s
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t c16 -m mapfile.txt \
	--config $(CFG_PATH)/cc65/c16-16k_GFX_64chars_stack_0x30.cfg \
	-D__NO_SCREEN_COLOR_INIT -D__USE_WAIT_V_SYNC \
	-D__ALT_PRINT \
	-D__MEMORY_MAPPED_GRAPHICS -D__DOUBLE_BUFFER \
	-D__ASSEMBLY_CLEAR_SCREEN -D__DEFAULT_CLEAR_SCREEN \
	-D__ALT_SLEEP \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_C16_DOUBLE_BUFFER_SLOWDOWN) \
	-D__UDG_BASE_FACTOR=15 \
	$(CROSS_LIB_PATH)/sound/cc65/c264/c264_sounds.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	$(FULL_FILES) \
	$(ASSETS_PATH)/cc65_udc_arcade_64_chars.s \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/c264/c16_linked_redefined_chars_init_graphics.c \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg

c16_16k_low_stack: $(ASSETS_PATH)/cc65_udc_arcade_64_chars.s
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t c16  \
	--config $(CFG_PATH)/cc65/c16-16k_GFX_64chars_stack_0x30_less_hd_stack.cfg \
	-D__NO_SCREEN_COLOR_INIT  \
	-D__ALT_PRINT \
	-D__MEMORY_MAPPED_GRAPHICS \
	-D__ASSEMBLY_CLEAR_SCREEN \
	-D__ALT_SLEEP \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_C16_SLOWDOWN) \
	-D__UDG_BASE_FACTOR=15 \
	$(CROSS_LIB_PATH)/sound/cc65/c264/c264_sounds.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	$(FULL_FILES) \
	$(ASSETS_PATH)/cc65_udc_arcade_64_chars.s \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/c264/c16_linked_redefined_chars_init_graphics.c \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg


c16_conio: c16_16k_conio

c16_16k_conio: $(ASSETS_PATH)/8x8_chars.h
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t c16 --config $(CFG_PATH)/cc65/c16-16k.cfg \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_C16_CONIO_SLOWDOWN) \
	-D__CONIO_GRAPHICS \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/c264/c16_redefined_chars_init_graphics.c  \
	$(CROSS_LIB_PATH)/sound/cc65/c264/c264_sounds.c \
	$(FULL_FILES) \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg

#c16_32k: c16_32k_conio

c16_32k: $(ASSETS_PATH)/8x8_chars.h
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t c16 --config $(CFG_PATH)/cc65/c16-32k.cfg \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_C16_SLOWDOWN) \
	-D__CONIO_GRAPHICS \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/c264/c16_redefined_chars_init_graphics.c  \
	$(CROSS_LIB_PATH)/sound/cc65/c264/c264_sounds.c \
	$(FULL_FILES) \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg

#################################################################


# c64_Ln: $(ASSETS_PATH)/cc65_udc_arcade.s
	# $(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t c64 -Ln global \
	# --config $(CFG_PATH)/cc65/c64_GFXat0xC000.cfg  \
	# -D__MEMORY_MAPPED_GRAPHICS -D__ALT_PRINT \
	# -D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_C64_SLOWDOWN) \
	# $(CROSS_LIB_PATH)/sound/cc65/sid/sid_sounds.c \
	# $(ASSETS_PATH)/cc65_udc_arcade.s \
	# $(CROSS_LIB_PATH)/display/init_graphics/cc65/c64/c64_init_graphics.c \
	# $(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	# $(FULL_FILES) \
	# -o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg

# -Ln global
c64: $(ASSETS_PATH)/cc65_udc_arcade.s
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t c64 \
	--config $(CFG_PATH)/cc65/c64_GFXat0xC000.cfg  \
	-D__MEMORY_MAPPED_GRAPHICS -D__ALT_PRINT \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_C64_SLOWDOWN) \
	$(CROSS_LIB_PATH)/sound/cc65/sid/sid_sounds.c \
	$(ASSETS_PATH)/cc65_udc_arcade.s \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/c64/c64_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	$(FULL_FILES) \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg


c64_double_buffer: $(ASSETS_PATH)/cc65_udc_arcade.s
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t c64 \
	--config $(CFG_PATH)/cc65/c64_GFXat0xC000.cfg  \
	-D__MEMORY_MAPPED_GRAPHICS -D__DOUBLE_BUFFER -D__ALT_PRINT \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_C64_SLOWDOWN) \
	$(CROSS_LIB_PATH)/sound/cc65/sid/sid_sounds.c \
	$(ASSETS_PATH)/cc65_udc_arcade.s \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/c64/c64_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	$(FULL_FILES) \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg

#TODO: Broken
c64_conio: $(ASSETS_PATH)/cc65_udc_arcade_conio.s
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t c64 \
	--config $(CFG_PATH)/cc65/c64_GFXat0xC000.cfg  \
	-D__CONIO_GRAPHICS \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_C64_SLOWDOWN) \
	$(CROSS_LIB_PATH)/sound/cc65/sid/sid_sounds.c \
	$(ASSETS_PATH)/cc65_udc_arcade_conio.s \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/c64/c64_init_graphics.c \
	$(FULL_FILES) \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg 

ifdef USE_TOOLS
c64_exomized: c64
	$(TOOLS_PATH)/generic/exomizer sfx basic $(BUILD_PATH)/X$(GAME_NAME)_$<.prg -o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg

c64_crt: c64_exomized
	python $(TOOLS_PATH)/cc65/c64/prg2crt.py $(BUILD_PATH)/X$(GAME_NAME)_$<.prg  $(BUILD_PATH)/X$(GAME_NAME)_$@.crt
endif

#################################################################

ifdef USE_TOOLS
gamate: $(ASSETS_PATH)/cc65_gamate_tiles.s $(TOOLS_PATH)/cc65/gamate/gamate-fixcart$(COMPILEDEXT)
else
gamate: $(ASSETS_PATH)/cc65_gamate_tiles.s
endif
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t gamate   --config $(CFG_PATH)/cc65/gamate_reduced_stack.cfg \
	 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_GAMATE_SLOWDOWN) \
	 $(GAMATE_GAME_OPTS) \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS  \
	-D__NO_SCREEN_COLOR_INIT \
	$(FULL_FILES) \
	$(ASSETS_PATH)/cc65_gamate_tiles.s \
	$(CROSS_LIB_PATH)/sound/cc65/gamate/gamate_sounds.c \
	-o $(BUILD_PATH)/X$(GAME_NAME)_gamate.bin
ifdef USE_TOOLS
	$(TOOLS_PATH)/cc65/gamate/gamate-fixcart$(COMPILEDEXT) $(BUILD_PATH)/X$(GAME_NAME)_gamate.bin
endif    
	
#################################################################

nes: $(ASSETS_PATH)/cc65_nes_color_tiles.s
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t nes \
	--config $(CFG_PATH)/cc65/nes_fx.cfg \
	-D__NES_CONIO_GRAPHICS \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_NES_SLOWDOWN) \
	$(NES_COLORS)  \
	-D__DEFAULT_CLEAR_SCREEN \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/nes/nes_init_graphics.c \
	$(ASSETS_PATH)/cc65_nes_color_tiles.s \
	$(FULL_FILES) \
	-o $(BUILD_PATH)/X$(GAME_NAME)_nes.nes


#################################################################

pce: pce_32k

pce_16k: $(ASSETS_PATH)/cc65_pce_tiles.s
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t pce \
	 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_PCE_SLOWDOWN) \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS \
	--config $(CFG_PATH)/cc65/pce_16k_less_stack.cfg   \
	$(FULL_FILES) \
	$(ASSETS_PATH)/cc65_pce_tiles.s \
	-o $(BUILD_PATH)/X$(GAME_NAME)_PCE.bin
	dd if=$(BUILD_PATH)/X$(GAME_NAME)_PCE.bin ibs=1 count=8192 of=$(BUILD_PATH)/X$(GAME_NAME)_PCE_LOW.bin
	dd if=$(BUILD_PATH)/X$(GAME_NAME)_PCE.bin ibs=1 skip=8192 of=$(BUILD_PATH)/X$(GAME_NAME)_PCE_HIGH.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_PCE.bin 
	cat $(BUILD_PATH)/X$(GAME_NAME)_PCE_HIGH.bin $(BUILD_PATH)/X$(GAME_NAME)_PCE_LOW.bin > $(BUILD_PATH)/X$(GAME_NAME)_PCE_SWAPPED.pce
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_PCE_LOW.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_PCE_HIGH.bin


pce_32k: $(ASSETS_PATH)/cc65_pce_tiles.s
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t pce \
	 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_PCE_SLOWDOWN) \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS \
	--config $(CFG_PATH)/cc65/pce_32k.cfg   \
	$(FULL_FILES) \
	$(ASSETS_PATH)/cc65_pce_tiles.s \
	-o $(BUILD_PATH)/X$(GAME_NAME)_PCE.bin
	dd if=$(BUILD_PATH)/X$(GAME_NAME)_PCE.bin ibs=1 count=24576 of=$(BUILD_PATH)/X$(GAME_NAME)_PCE_LOW.bin
	dd if=$(BUILD_PATH)/X$(GAME_NAME)_PCE.bin ibs=1 skip=24576 of=$(BUILD_PATH)/X$(GAME_NAME)_PCE_HIGH.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_PCE.bin 
	cat $(BUILD_PATH)/X$(GAME_NAME)_PCE_HIGH.bin $(BUILD_PATH)/X$(GAME_NAME)_PCE_LOW.bin > $(BUILD_PATH)/X$(GAME_NAME)_PCE_SWAPPED.pce
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_PCE_LOW.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_PCE_HIGH.bin


#################################################################


creativision: $(ASSETS_PATH)/8x8_chars.h
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t creativision \
	-D__CREATIVISION__  \
	 -D__ALT_SLEEP $(CREATIVISION_GAME_OPTS) \
	-D__VDP_MODE1_GRAPHICS \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_CREATIVISION_SLOWDOWN) \
	--config $(CFG_PATH)/cc65/creativision-16k.cfg \
	$(CROSS_LIB_PATH)/sound/cc65/creativision/creativision_sounds.c \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/creativision/creativision_color_init_graphics.c \
	-o $(BUILD_PATH)/X$(GAME_NAME)_creativision_16k.bin
	dd if=$(BUILD_PATH)/X$(GAME_NAME)_creativision_16k.bin bs=8k skip=1 > $(BUILD_PATH)/X$(GAME_NAME)_creativision_16k_SWAPPED.bin
	dd if=$(BUILD_PATH)/X$(GAME_NAME)_creativision_16k.bin bs=8k count=1 >> $(BUILD_PATH)/X$(GAME_NAME)_creativision_16k_SWAPPED.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_creativision_16k.bin


#################################################################

oric: oric_atmos

atmos: oric_atmos

oric1: oric_atmos

oric1_48k: oric_atmos

oric_atmos: $(ASSETS_PATH)/6x8_chars.h
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS)  \
	-t atmos -D_XL_NO_JOYSTICK $(ORIC_COLORS) \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ORIC_SLOWDOWN) \
	-D_TILE_17_COLOR=0 -D_TILE_10_COLOR=0 -D_TILE_18_COLOR=0 \
	--config $(CFG_PATH)/cc65/atmos_better_tap.cfg \
	-D__ORIC_COLOR_GRAPHICS \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/atmos/atmos_redefined_characters_init_graphics.c \
	$(FULL_FILES) \
	-o $(BUILD_PATH)/X$(GAME_NAME)_atmos_and_oric1_48k.tap


#################################################################


pet: pet_16k

pet_16k: 
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t pet \
	 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_PET_SLOWDOWN) \
	-D__NO_INIT_GRAPHICS -D__CONIO_GRAPHICS -D_XL_NO_UDG  \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/sound/cc65/pet/pet_sounds.c \
	-o $(BUILD_PATH)/X$(GAME_NAME)_pet_16k.prg


#################################################################

supervision: $(ASSETS_PATH)/cc65_udc.s 
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t supervision  \
	--config $(CFG_PATH)/cc65/supervision-16k_GFX_2.cfg \
	$(ASSETS_PATH)/cc65_udc.s \
	-D__ALT_PRINT -D__ALT_SLEEP \
	-D__BIT_MAPPED_4_GRAPHICS \
	-D__DEFAULT_CLEAR_SCREEN \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_SUPERVISION_SLOWDOWN) \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/supervision/supervision_init_graphics.c \
	-o $(BUILD_PATH)/X$(GAME_NAME)_supervision.sv


#################################################################


vic20: vic20_exp_16k

vic20_exp_16k: $(ASSETS_PATH)/cc65_udc_arcade_v2.s
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS)  -t vic20    \
	--config $(CFG_PATH)/cc65/vic20-16k_CODE2_GFX_V2.cfg \
	-D__CONIO_GRAPHICS -D__VIC20_EXP_8K  \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_VIC20_SLOWDOWN)  \
	 \
	$(ASSETS_PATH)/cc65_udc_arcade_v2.s \
	$(FULL_FILES) \
	--code-name CODE2 \
	$(CROSS_LIB_PATH)/sound/cc65/vic20/vic20_sounds.c \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/vic20/vic20_init_graphics.c \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg


vic20_exp_8k_conio: $(ASSETS_PATH)/cc65_udc_arcade_v2.s
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS)  -t vic20    \
	--config $(CFG_PATH)/cc65/vic20-8k_CODE2_GFX_V2.cfg \
	-D__CONIO_GRAPHICS -D__VIC20_EXP_8K  \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_VIC20_SLOWDOWN) \
	$(FULL_FILES) \
	--code-name CODE2 \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/vic20/vic20_init_graphics.c \
	$(CROSS_LIB_PATH)/sound/cc65/vic20/vic20_sounds.c \
	$(ASSETS_PATH)/cc65_udc_arcade_v2.s \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg


vic20_exp_8k: $(ASSETS_PATH)/cc65_udc_vic20_27_tiles.s
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t vic20 \
	--config $(CFG_PATH)/cc65/vic20-8k_memory_mapped_GFX.cfg \
	-D__ALT_SLEEP \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_VIC20_SLOWDOWN) \
	-D__MEMORY_MAPPED_GRAPHICS  -D__VIC20__ -D__VIC20_EXP_8K \
	-D__ALT_PRINT \
	-D__DEFAULT_CLEAR_SCREEN \
	$(FULL_FILES) \
	--code-name CODE2 \
	$(ASSETS_PATH)/cc65_udc_vic20_27_tiles.s \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/vic20/vic20_init_graphics.c \
	$(CROSS_LIB_PATH)/sound/cc65/vic20/vic20_sounds.c \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg


vic20_exp_3k: $(ASSETS_PATH)/cc65_udc_vic20_64_chars.s
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t vic20 \
	--config $(CFG_PATH)/cc65/vic20-3k_GFX.cfg \
	-D__VIC20_EXP_3K \
	-D__MEMORY_MAPPED_GRAPHICS \
	$(VIC_20_EXP_3K_GAME_OPTS) \
	-D__ALT_PRINT \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_VIC20_SLOWDOWN)  \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/vic20/vic20_init_graphics.c \
	$(CROSS_LIB_PATH)/sound/cc65/vic20/vic20_sounds.c \
	$(FULL_FILES) \
	$(ASSETS_PATH)/cc65_udc_vic20_64_chars.s \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg



# Unexpanded VIC 20, with 6 tiles, default ASCII mapped as reverse characters
# vic20_unexpanded: $(ASSETS_PATH)/cc65_udc_6chars.s
	# $(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t vic20 -m mapfile.txt \
	# -D_XL_NO_TEXT_COLOR \
	# -D__VIC20_UNEXPANDED -D_XL_NUMBER_OF_TILES=6 \
	# -D_XL_NO_SLEEP_SEC -D__ALT_SLEEP \
	# -D__NO_COLOR_INIT \
	# -D__MEMORY_MAPPED_GRAPHICS \
	# -D__ALT_PRINT \
	# -D__DEFAULT_CLEAR_SCREEN \
	# -D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_VIC20_SLOWDOWN)  \
	# $(VIC20_UNEXPANDED_GAME_OPTS) \
	# --config $(CFG_PATH)/cc65/vic20_unexpanded_gfx.cfg  \
	# $(FULL_FILES) \
	# $(CROSS_LIB_PATH)/sound/cc65/vic20/vic20_sounds.c \
	# $(CROSS_LIB_PATH)/display/init_graphics/cc65/vic20/vic20_init_graphics.c \
	# $(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	# $(ASSETS_PATH)/cc65_udc_6chars.s \
	# -o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg


# Same as above but with just explosion sound
vic20_unexpanded: $(ASSETS_PATH)/cc65_udc_6chars.s
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t vic20 -m mapfile.txt \
	-D_XL_NO_TEXT_COLOR \
	-D__VIC20_UNEXPANDED -D_XL_NUMBER_OF_TILES=6 \
	-D_XL_NO_SLEEP_SEC -D__ALT_SLEEP \
	-D__NO_COLOR_INIT \
	-D__MEMORY_MAPPED_GRAPHICS \
	-D__ALT_PRINT \
	-D__DEFAULT_CLEAR_SCREEN \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_VIC20_SLOWDOWN)  \
	$(VIC20_UNEXPANDED_GAME_OPTS) \
	--config $(CFG_PATH)/cc65/vic20_unexpanded_gfx.cfg  \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/sound/cc65/vic20/vic20_explosion_sound.c \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/vic20/vic20_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	$(ASSETS_PATH)/cc65_udc_6chars.s \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg

vic20_unexpanded2: $(ASSETS_PATH)/cc65_udc_6chars.s
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t vic20 -m mapfile.txt \
	-D_XL_NO_TEXT_COLOR \
	-D__VIC20_UNEXPANDED -D_XL_NUMBER_OF_TILES=6 \
	-D_XL_NO_SLEEP_SEC -D__ALT_SLEEP \
	-D__NO_COLOR_INIT \
	-D__MEMORY_MAPPED_GRAPHICS \
	-D__ALT_PRINT \
	-D__DEFAULT_CLEAR_SCREEN \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_VIC20_SLOWDOWN)  \
	$(VIC20_UNEXPANDED_GAME_OPTS) \
	--config $(CFG_PATH)/cc65/vic20_unexpanded_gfx_low_stack.cfg  \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/sound/cc65/vic20/vic20_sounds.c \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/vic20/vic20_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	$(ASSETS_PATH)/cc65_udc_6chars.s \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg

vic20_unexpanded_no_gfx:
	$(CC65_PATH)$(MYCC65) $(INCLUDE_OPTS) $(CC65_OPTS) -t vic20 \
	-D__MEMORY_MAPPED_GRAPHICS \
	-D_XL_NO_TEXT_COLOR \
	-D__VIC20_UNEXPANDED \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_VIC20_SLOWDOWN)  \
	-D__ALT_SLEEP -D_XL_NO_SLEEP_SEC \
	-D__NO_SCREEN_COLOR_INIT \
	-D_XL_NO_UDG \
	$(VIC20_UNEXPANDED_NO_GFX_GAME_OPTS) \
	-D__ALT_PRINT \
	--config $(CFG_PATH)/cc65/alt/vic20_unexpanded.cfg  \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/sound/cc65/vic20/vic20_sounds.c \
	$(CROSS_LIB_PATH)/display/init_graphics/cc65/vic20/vic20_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg

#################################################################
# Z88DK


#################################################################

jupiter_ace: ace

ace: ace_exp_16k

ace_exp_16k: $(ASSETS_PATH)/z88dk_xchase.asm
	$(Z88DK_PATH)$(MYZ88DK) +ace $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-D__ACE__  \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ACE_SLOWDOWN) \
	 \
	-D__CONIO_GRAPHICS \
	-clib=default \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	$(FULL_FILES) \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@ -Cz--audio -create-app
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@

#################################################################


agon: agon_mode2

agon_mode2: $(ASSETS_PATH)/z88dk_xchase.asm
	$(Z88DK_PATH)$(MYZ88DK) +agon $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-D__AGON__ -D_XL_NO_JOYSTICK -pragma-redirect:fputc_cons=fputc_cons_generic \
	-D__SCREEN_MODE=2 -pragma-define:CRT_ENABLE_COMMANDLINE=0 \
	-D__CONIO_GRAPHICS -DXSize=40 -DYSize=24 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_AGON_SLOWDOWN) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	$(FULL_FILES) \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@


#################################################################


aquarius: aquarius_exp_16k

aquarius_exp_16k: 
	$(Z88DK_PATH)$(MYZ88DK) +aquarius $(SCCZ80_OPTS) -clib=ansi $(INCLUDE_OPTS) -vn \
	 -D__AQUARIUS__ \
	-lndos -D_XL_NO_UDG -D_XL_NO_JOYSTICK \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_AQUARIUS_SLOWDOWN) \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS \
	$(FULL_FILES) \
	-create-app	\
	-o $(BUILD_PATH)/X$(GAME_NAME)_aquarius_exp_16k
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_aquarius_exp_16k


aquarius_alt: 
	$(Z88DK_PATH)$(MYZ88DK) +aquarius $(SCCZ80_OPTS) -clib=ansi $(INCLUDE_OPTS) -vn \
	 -D__AQUARIUS__ \
	-lndos -D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_AQUARIUS_SLOWDOWN) -D_XL_NO_UDG \
	-D__MEMORY_MAPPED_GRAPHICS -D__NO_INIT_GRAPHICS -D_XL_NO_JOYSTICK \
	$(FULL_FILES) \
	-create-app	\
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@



# experimental
aquarius_exp_4k: 
	$(Z88DK_PATH)$(MYZ88DK) +aquarius -SO3 -compiler=sdcc -clib=ansi $(INCLUDE_OPTS) -vn \
	-pragma-include:$(CFG_PATH)/z88dk/zpragma_clib.inc \
	-D__AQUARIUS__ \
	-lndos -D_XL_NO_UDG -D_XL_NO_JOYSTICK \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_AQUARIUS_SLOWDOWN) \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS \
	$(FULL_FILES) \
	-create-app	\
	-o $(BUILD_PATH)/X$(GAME_NAME)_aquarius_exp_4k
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_aquarius_exp_4k


#  
# -D__BIT_BANG_SOUND 
#################################################################

c128: c128_40col

c128_zsdcc: c128_z80_40col_zsdcc
c128_40col_zsdcc: c128_z80_40col_zsdcc


c128_40col: c128_z80_40col

c128_z80_40col: $(ASSETS_PATH)/z88dk_xchase.asm 
	$(Z88DK_PATH)$(MYZ88DK) +c128 $(SCCZ80_OPTS)  \
	$(INCLUDE_OPTS) \
	-lndos -subtype=disk -clib=gencon \
	-D__C128_Z80__ -DXSize=40 \
	 \
	-D__BIT_BANG_SOUND   \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_C128_Z80_40COL_SLOWDOWN) \
	-D__CONIO_GRAPHICS  \
	$(FULL_FILES) \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	-create-app -o"a40.bin"
ifdef USE_TOOLS
	$(C1541) -format "crosschase,0" d64 FULL_$@.d64
	$(C1541) -attach FULL_$@.d64 -write a40.ldr
	$(C1541) -attach FULL_$@.d64 -write a40
	mv FULL_$@.d64 $(BUILD_PATH)/X$(GAME_NAME)_$@.d64
	rm a40.bin
else
	mv a40.bin $(BUILD_PATH)/X$(GAME_NAME)_$@.bin
endif
	rm a40.ldr
	rm a40

c128_80col: c128_z80_80col

c128_z80_80col: $(ASSETS_PATH)/z88dk_sprites_definitions.h
	$(Z88DK_PATH)$(MYZ88DK) +c128 $(SCCZ80_OPTS) -lgfx128hr \
	$(INCLUDE_OPTS)  \
	-lndos -subtype=disk \
	-D__C128_Z80__ -D__SPRITE_X_STEP=8 -D__SPRITE_Y_STEP=8 -D__NO_SPRITE_TRANSPARENCY \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_C128_Z80_80COL_SLOWDOWN) \
	-D__Z88DK_SPRITES_GRAPHICS \
	-D__BIT_BANG_SOUND $(C128_Z80_80COL_GAME_OPTS)  \
	-D__ALT_PRINT \
	-D_XL_NO_COLOR \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/c128/c128_init_graphics.c \
	$(FULL_FILES) \
	-create-app -o"a80.bin"
ifdef USE_TOOLS
	$(C1541) -format "crosschase,0" d64 X$(GAME_NAME)_$@.d64
	$(C1541) -attach X$(GAME_NAME)_$@.d64 -write a80.ldr
	$(C1541) -attach X$(GAME_NAME)_$@.d64 -write a80
	mv X$(GAME_NAME)_$@.d64 $(BUILD_PATH)/
	rm a80.bin
else
	mv a80.bin $(BUILD_PATH)/X$(GAME_NAME)_$@.bin
endif
	rm a80.ldr
	rm a80

c128_8x6: c128_8x6_80col
c128_8x6_80col: c128_z80_8x6_80col
c128_z80_8x6_80col: $(ASSETS_PATH)/z88dk_8x6_sprites_definitions.h
	$(Z88DK_PATH)$(MYZ88DK) +c128 $(SCCZ80_OPTS) -lgfx128hr \
	$(INCLUDE_OPTS)  \
	-lndos -subtype=disk \
	-D__C128_Z80__ -D__NO_SPRITE_TRANSPARENCY \
	-D__Z88DK_SPRITES_GRAPHICS -D__SPRITE_X_STEP=8 -D__SPRITE_Y_STEP=6 -DSPRITE_Y_SIZE=6 -DYSize=33 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_C128_Z80_80COL_SLOWDOWN) \
	-D__BIT_BANG_SOUND $(C128_Z80_80COL_GAME_OPTS)  \
	-D__ALT_PRINT \
	-D_XL_NO_COLOR \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/c128/c128_init_graphics.c \
	$(FULL_FILES) \
	-create-app -o"a80.bin"
ifdef USE_TOOLS
	$(C1541) -format "crosschase,0" d64 X$(GAME_NAME)_$@.d64
	$(C1541) -attach X$(GAME_NAME)_$@.d64 -write a80.ldr
	$(C1541) -attach X$(GAME_NAME)_$@.d64 -write a80
	mv X$(GAME_NAME)_$@.d64 $(BUILD_PATH)/
	rm a80.bin
else
	mv a80.bin $(BUILD_PATH)/X$(GAME_NAME)_$@.bin
endif
	rm a80.ldr
	rm a80

#################################################################

camputers_lynx: $(ASSETS_PATH)/z88dk_xchase.asm
	$(Z88DK_PATH)$(MYZ88DK) +lynx $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-pragma-redirect:fputc_cons=fputc_cons_generic \
	-pragma-redirect:getk=getk_inkey \
	-D__CAMPUTERS_LYNX__ -D_XL_NO_JOYSTICK  -D__BIT_BANG_SOUND \
	-vn \
	$(CAMPUTERS_LYNX_GAME_OPTS) \
	-D__VT52 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_CAMPUTERS_LYNX_SLOWDOWN) \
	-lndos \
	-D__CONIO_GRAPHICS  \
	$(FULL_FILES) \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	-create-app -o $(BUILD_PATH)/X$(GAME_NAME)_camputers_lynx.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_camputers_lynx.bin


#################################################################

coleco: $(ASSETS_PATH)/z88dk_xchase.asm
	$(Z88DK_PATH)$(MYZ88DK) +coleco $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-D__COLECO__  \
	 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_COLECO_SLOWDOWN) \
	-D__VT52 \
	-D__CONIO_GRAPHICS \
	-lndos \
	 \
	-clib=default -pragma-redirect:fputc_cons=fputc_cons_generic \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	$(FULL_FILES) \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_coleco.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_coleco.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_coleco_DATA.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_coleco_BSS.bin

#################################################################

cpc: cpc_mode0

ifdef USE_TOOLS
cpc_mode0: $(ASSETS_PATH)/z88dk_xchase.asm $(TOOLS_PATH)/z88dk/cpc/nocart/nocart$(COMPILEDEXT)
else
cpc_mode0: $(ASSETS_PATH)/z88dk_xchase.asm
endif
	$(Z88DK_PATH)$(MYZ88DK) +cpc -subtype=dsk $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-pragma-include:$(CFG_PATH)/z88dk/zpragma_clib.inc  \
	-DYSize=25 -DXSize=20 -D__SCREEN_MODE=0 \
	$(CPC_GAME_OPTS) \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_CPC_MODE0_SLOWDOWN) \
	-D__CPC__ \
	-lndos -create-app \
	-D__CONIO_GRAPHICS \
	-pragma-redirect:fputc_cons=fputc_cons_generic \
	-o $(BUILD_PATH)/XBIN \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(CROSS_LIB_PATH)/sound/z88dk/psg/ay-3-8910_psg_sounds.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	$(FULL_FILES)
ifdef USE_TOOLS
	cp $(TOOLS_PATH)/z88dk/cpc/nocart/*.rom .
	$(TOOLS_PATH)/z88dk/cpc/nocart/nocart$(COMPILEDEXT) $(BUILD_PATH)/XBIN.dsk  $(BUILD_PATH)/XBIN_$@_gx4000.cpr   -c 'run"XBIN.CPC'
	rm os.rom
	rm amsdos.rom
	rm basic.rom
endif
	mv $(BUILD_PATH)/XBIN.dsk $(BUILD_PATH)/X$(GAME_NAME)_$@.dsk
	mv $(BUILD_PATH)/XBIN_$@_gx4000.cpr $(BUILD_PATH)/X$(GAME_NAME)_$@_gx4000.cpr
	rm -rf $(BUILD_PATH)/XBIN.bin
	rm -rf $(BUILD_PATH)/XBIN.cpc
	rm -rf $(BUILD_PATH)/XBIN




#################################################################

cpm: cpm_z80_adm3a

cpm_adm3a: cpm_z80_adm3a

cpm_8080: cpm_8080_adm3a

cpm_8085: cpm_8085_adm3a

cpm_vt52: cpm_z80_vt52

cpm_targets: cpm_adm3a cpm_vt52

cpm_z80_adm3a:
	$(Z88DK_PATH)$(MYZ88DK) +cpm $(SCCZ80_OPTS) \
	$(INCLUDE_OPTS) --generic-console -pragma-define:CONSOLE_COLUMNS=80 -pragma-define:CONSOLE_ROWS=24 -lndos \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_CPM_Z80_SLOWDOWN) \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS -D__NO_SCREEN_COLOR_INIT -D__XL_NO_COLOR \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_$@.bin \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.bin

cpm_8080_adm3a:
	$(Z88DK_PATH)$(MYZ88DK) +cpm $(SCCZ80_OPTS) \
	$(INCLUDE_OPTS) -clib=8080 --generic-console -pragma-define:CONSOLE_COLUMNS=80 -pragma-define:CONSOLE_ROWS=24 -lndos \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_CPM_Z80_SLOWDOWN) \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS -D__NO_SCREEN_COLOR_INIT -D__XL_NO_COLOR \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_$@.bin \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.bin

cpm_8085_adm3a:
	$(Z88DK_PATH)$(MYZ88DK) +cpm $(SCCZ80_OPTS) \
	$(INCLUDE_OPTS) -clib=8085 --generic-console -pragma-define:CONSOLE_COLUMNS=80 -pragma-define:CONSOLE_ROWS=24 -lndos \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_CPM_Z80_SLOWDOWN) \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS -D__NO_SCREEN_COLOR_INIT -D__XL_NO_COLOR \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_$@.bin \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.bin

cpm_z80_vt52:
	$(Z88DK_PATH)$(MYZ88DK) +cpm $(SCCZ80_OPTS) \
	$(INCLUDE_OPTS) \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_CPM_Z80_SLOWDOWN) \
	-D__VT52 -DXSize=80 -DYSize=24 \
	-D__NO_WAIT -D__XL_NO_COLOR \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS -D__NO_SCREEN_COLOR_INIT \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_$@.bin \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.bin

cpm_8080_vt52:
	$(Z88DK_PATH)$(MYZ88DK) +cpm $(SCCZ80_OPTS) -m8080 -clib=8080 \
	$(INCLUDE_OPTS) \
	-D__VT52 -DXSize=80 -DYSize=24 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_CPM_INTEL8080_SLOWDOWN) \
	-D__NO_WAIT -D__XL_NO_COLOR \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS -D__NO_SCREEN_COLOR_INIT \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_$@.bin \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.bin

#################################################################


gb: $(ASSETS_PATH)/z88dk_gameboy.asm
	$(Z88DK_PATH)$(MYZ88DK) +gb $(SCCZ80_ROM_OPTS) -v $(INCLUDE_OPTS) -pragma-redirect:fputc_cons=fputc_cons_generic \
	-D__GB__ \
	-DXSize=20 \
	-DYSize=18 \
	-D__NO_SCREEN_COLOR_INIT \
	-D_XL_NO_COLOR  \
	-D__SCREEN_MODE=1  \
	-D__CONIO_GRAPHICS  \
	-lndos \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_GB_SLOWDOWN) \
	 $(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_gameboy.asm \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/sound/z88dk/gb/gb_sounds.c \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_$@.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@_BSS.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@_DATA.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@_BANK_1F.bin


#################################################################

gal: gal_22k

gal_22k:
	$(Z88DK_PATH)$(MYZ88DK) +gal $(SCCZ80_OPTS) \
	$(INCLUDE_OPTS) \
	-pragma-need=ansiterminal \
	-D__GAL__    \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_GAL_SLOWDOWN) \
	-vn -lndos -create-app -o  $(BUILD_PATH)/X$(GAME_NAME)_galaksija.prg \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg


gal_plus: gal_plus_gfx

gal_plus_gfx: $(ASSETS_PATH)/z88dk_xchase.asm
	$(Z88DK_PATH)$(MYZ88DK) +gal -subtype=galaxyp $(SCCZ80_OPTS) \
	$(INCLUDE_OPTS) \
	--generic-console -D__SCREEN_MODE=1  -DYSize=26  \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_GAL_GFX_SLOWDOWN) \
	-D__GAL__ -D__GAL_PLUS__  $(GAL_PLUS_GAME_OPTS)  \
	-D__CONIO_GRAPHICS  -D__BIT_BANG_SOUND \
	-vn -lndos -create-app -o  $(BUILD_PATH)/X$(GAME_NAME)_galaksija_plus.prg \
	$(FULL_FILES) $(ASSETS_PATH)/z88dk_xchase.asm \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg


#################################################################


gg: gamegear

gamegear: $(ASSETS_PATH)/z88dk_xchase.asm 
	$(Z88DK_PATH)$(MYZ88DK) +sms -subtype=gamegear $(SCCZ80_ROM_OPTS) $(INCLUDE_OPTS) -pragma-redirect:fputc_cons=fputc_cons_generic \
	-D__SMS__ -D__GAME_GEAR__ \
	-DXSize=20 \
	-DYSize=18 \
	-D__BIT_BANG_SOUND \
	-D__CONIO_GRAPHICS  \
	-lndos \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_GG_SLOWDOWN) \
	 $(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	$(FULL_FILES) \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_gamegear.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_gamegear.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_gamegear_BSS.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_gamegear_DATA.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_gamegear_BANK_1F.bin


#################################################################

laser500: laser500_keyboard

laser500_joy: $(ASSETS_PATH)/z88dk_xchase.asm 
	$(Z88DK_PATH)$(MYZ88DK) +laser500 $(SCCZ80_OPTS) -vn -Cz--audio \
	-create-app -o $(BUILD_PATH)/X$(GAME_NAME)_$@.bin \
	$(INCLUDE_OPTS) \
	-D__LASER500__  -DXSize=40 -DYSize=22 -D__SCREEN_MODE=2 \
	-D__BIT_BANG_SOUND  \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_LASER500_SLOWDOWN) \
	-D__CONIO_GRAPHICS \
	-lndos \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm 
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@.cas


laser500_keyboard: $(ASSETS_PATH)/z88dk_xchase.asm 
	$(Z88DK_PATH)$(MYZ88DK) +laser500 $(SCCZ80_OPTS) -vn -Cz--audio \
	-create-app -o $(BUILD_PATH)/X$(GAME_NAME)_$@.bin \
	$(INCLUDE_OPTS) -D_XL_NO_JOYSTICK \
	-D__LASER500__  -DXSize=40 -DYSize=22 -D__SCREEN_MODE=2 \
	-D__BIT_BANG_SOUND  \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_LASER500_SLOWDOWN) \
	-D__CONIO_GRAPHICS \
	 \
	 \
	-lndos \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm 
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@.cas


#################################################################

# -D__NO_BOTTOM 
m100:
	$(Z88DK_PATH)$(MYZ88DK) +m100 $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-D__M100__ \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_M100_SLOWDOWN) \
	-DXSize=39 \
	-DYSize=8 \
	-D__NO_SCREEN_COLOR_INIT \
	-D_XL_NO_COLOR \
	-D_XL_NO_JOYSTICK -D_XL_NO_UDG \
	-D__VT52 \
	-D__CONIO_GRAPHICS \
	-lndos \
	-D__NO_INIT_GRAPHICS \
	$(FULL_FILES) \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_$@.bin
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@.bin


m10:
	$(Z88DK_PATH)$(MYZ88DK) +m100 $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-D__M100__ -clib m10 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_M100_SLOWDOWN) \
	-DXSize=39 \
	-DYSize=8 \
	-D__NO_SCREEN_COLOR_INIT \
	-D_XL_NO_COLOR \
	-D_XL_NO_JOYSTICK -D_XL_NO_UDG \
	-D__VT52 \
	-D__CONIO_GRAPHICS \
	-lndos \
	-D__NO_INIT_GRAPHICS \
	$(FULL_FILES) \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_$@.bin
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@.bin


kc85:
	$(Z88DK_PATH)$(MYZ88DK) +m100 $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-D__M100__ -clib kc85 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_M100_SLOWDOWN) \
	-DXSize=39 \
	-DYSize=8 \
	-D__NO_SCREEN_COLOR_INIT \
	-D_XL_NO_COLOR \
	-D_XL_NO_JOYSTICK -D_XL_NO_UDG \
	-D__VT52 \
	-D__CONIO_GRAPHICS \
	-lndos \
	-D__NO_INIT_GRAPHICS \
	$(FULL_FILES) \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_$@.bin
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@.bin


pc8201:
	$(Z88DK_PATH)$(MYZ88DK) +m100 $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-D__M100__ -clib pc8201 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_M100_SLOWDOWN) \
	-DXSize=39 \
	-DYSize=8 \
	-D__NO_SCREEN_COLOR_INIT \
	-D_XL_NO_COLOR \
	-D_XL_NO_JOYSTICK -D_XL_NO_UDG \
	-D__VT52 \
	-D__CONIO_GRAPHICS \
	-lndos \
	-D__NO_INIT_GRAPHICS \
	$(FULL_FILES) \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_$@.bin
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@.bin


t200:
	$(Z88DK_PATH)$(MYZ88DK) +m100 $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-D__M100__ -clib t200 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_M100_SLOWDOWN) \
	-DXSize=39 \
	-DYSize=16 \
	-D__NO_SCREEN_COLOR_INIT \
	-D_XL_NO_COLOR \
	-D_XL_NO_JOYSTICK -D_XL_NO_UDG \
	-D__VT52 \
	-D__CONIO_GRAPHICS \
	-lndos \
	-D__NO_INIT_GRAPHICS \
	$(FULL_FILES) \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_$@.bin
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@.bin


mc1000_mono: $(ASSETS_PATH)/z88dk_xchase.asm 
	$(Z88DK_PATH)$(MYZ88DK) +mc1000 $(SCCZ80_OPTS) $(INCLUDE_OPTS) -pragma-define:REGISTER_SP=0x3fff \
	-subtype=gaming \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_MC1000_SLOWDOWN) \
	-D__SCREEN_MODE=1 \
	-D__MC1000__ -D_XL_NO_JOYSTICK  \
	-D__CONIO_GRAPHICS \
	-vn  -lndos -Cz--audio \
	-create-app -o $(BUILD_PATH)/X$(GAME_NAME)_$@.bin \
	-clib=default -pragma-redirect:fputc_cons=fputc_cons_generic \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	$(FULL_FILES)
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@.bin
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@.cas


mc1000_color: mc1000

# background color white
mc1000: $(ASSETS_PATH)/z88dk_xchase.asm 
	$(Z88DK_PATH)$(MYZ88DK) +mc1000 $(SCCZ80_OPTS) $(INCLUDE_OPTS) -pragma-define:REGISTER_SP=0x3fff \
	-subtype=gaming \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_MC1000_SLOWDOWN) \
	-D__SCREEN_MODE=2 -DXSize=16  -D__NO_SCREEN_COLOR_INIT \
	-D__MC1000__ -D_XL_NO_JOYSTICK  \
	-D__CONIO_GRAPHICS \
	-vn  -lndos -Cz--audio \
	-create-app -o $(BUILD_PATH)/X$(GAME_NAME)_$@.bin \
	-clib=default -pragma-redirect:fputc_cons=fputc_cons_generic \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	$(FULL_FILES)
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@.bin
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@.cas


#############################
# MICROBEE

bee: bee_no_gfx

bee_no_gfx: bee_40col_no_gfx

bee_no_gfx_wav: bee_40col_no_gfx_wav


bee_40col: bee_40col_no_gfx

bee_40col_no_gfx:
	$(Z88DK_PATH)$(MYZ88DK) +bee $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-D__BEE__ -clib=ansi40  -vn  -DXSize=40 -DYSize=25 \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS -D_XL_NO_UDG -D_XL_NO_JOYSTICK \
	-lndos -create-app -o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg  \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_BEE_SLOWDOWN) \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg


 
#################################################################

msx: msx_16k

msx_16k: $(ASSETS_PATH)/z88dk_xchase.asm   
	$(Z88DK_PATH)$(MYZ88DK) +msx $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-pragma-redirect:fputc_cons=fputc_cons_generic \
	-vn   -D__MSX__ \
	-lndos -subtype=rom \
	-create-app -o $(BUILD_PATH)/X$(GAME_NAME)_$@.rom \
	-D__CONIO_GRAPHICS   -DXSize=32 -DYSize=24 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_MSX_SLOWDOWN) \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(CROSS_LIB_PATH)/sound/z88dk/psg/ay-3-8910_psg_sounds.c \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@_BSS.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@_DATA.bin


#################################################################

mtx: mtx512

# $(CROSS_LIB_PATH)/sound/z88dk/psg/sn76489a_psg_sounds.c
# -D__PSG_SOUND
mtx512: $(ASSETS_PATH)/z88dk_xchase.asm
	$(Z88DK_PATH)$(MYZ88DK) +mtx $(SCCZ80_OPTS) -clib=ansi -startup=2 $(INCLUDE_OPTS) \
	-D__MTX__ -D__SCREEN_MODE=2 \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_$@.bin -vn \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_MTX512_SLOWDOWN) \
	-D__CONIO_GRAPHICS \
	-lndos \
	-clib=default -pragma-redirect:fputc_cons=fputc_cons_generic \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	$(FULL_FILES) 
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@.bin



mtx500: $(ASSETS_PATH)/z88dk_xchase.asm
	$(Z88DK_PATH)$(MYZ88DK) +mtx $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-D__MTX__ \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_$@.bin -vn \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_MTX500_SLOWDOWN) \
	-D__CONIO_GRAPHICS \
	-lndos \
	-clib=default -pragma-redirect:fputc_cons=fputc_cons_generic \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	$(FULL_FILES) 
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@.bin



#################################################################


mz:
	$(Z88DK_PATH)$(MYZ88DK) +mz $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-D__MZ__ -clib=ansi -pragma-define:ansicolumns=32 -Cz--audio -vn \
	-D_XL_NO_UDG  \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_MZ_SLOWDOWN) \
	-pragma-define:REGISTER_SP=0xd000 \
	-lndos -create-app -o $(BUILD_PATH)/X$(GAME_NAME)_mz.prg \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_mz.prg
	mv $(BUILD_PATH)/X$(GAME_NAME)_mz.mzt $(BUILD_PATH)/X$(GAME_NAME)_mz.mzf


#################################################################



nabu_no_gfx:
	$(Z88DK_PATH)$(MYZ88DK) +nabu $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-D__NABU__  \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_M100_SLOWDOWN) \
	-DXSize=32 \
	-DYSize=24 \
	-D__NO_SCREEN_COLOR_INIT \
	-D_XL_NO_COLOR \
	-D_XL_NO_JOYSTICK -D_XL_NO_UDG \
	-D__VT52 \
	-D__CONIO_GRAPHICS \
	-lndos \
	-D__NO_INIT_GRAPHICS \
	$(FULL_FILES) \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_$@.bin
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@.bin


nabu: $(ASSETS_PATH)/z88dk_xchase.asm
	$(Z88DK_PATH)$(MYZ88DK) +nabu $(SCCZ80_OPTS)  -Cz--audio $(INCLUDE_OPTS) -vn \
	 -D__NABU__    \
	-lndos -DXSize=32 -DYSize=24 -D_XL_NO_JOYSTICK \
	-clib=default -pragma-redirect:fputc_cons=fputc_cons_generic \
	-D__CONIO_GRAPHICS -D_XL_NO_SOUND -D__DEFAULT_CLEAR_SCREEN \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_M100_SLOWDOWN) \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_$@.bin
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@.bin


#################################################################


pc88: $(ASSETS_PATH)/z88dk_xchase.asm
	$(Z88DK_PATH)$(MYZ88DK) +pc88 $(SCCZ80_OPTS) $(INCLUDE_OPTS) -vn \
	 -D__PC88__  -subtype=disk  \
	-lndos -DXSize=80 -DYSize=25 -D_XL_NO_JOYSTICK \
	-clib=default -pragma-redirect:fputc_cons=fputc_cons_generic \
	-D__CONIO_GRAPHICS -D__BIT_BANG_SOUND -D__DEFAULT_CLEAR_SCREEN \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_PC88_SLOWDOWN) \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	-create-app	\
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@
	# mv FULL_pc88.d88 $(BUILD_PATH)/X$(GAME_NAME)_$@.d88
	rm $(BUILD_PATH)/X$(GAME_NAME)_$@_BOOTSTRAP.bin
	$(Z88DK_PATH)$(MYZ88DK) +pc88 $(SCCZ80_OPTS)  -Cz--audio $(INCLUDE_OPTS) -vn \
	 -D__PC88__    \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_PC88_SLOWDOWN) \
	-lndos -DXSize=80 -DYSize=25 \
	-clib=default -pragma-redirect:fputc_cons=fputc_cons_generic \
	-D__CONIO_GRAPHICS -D__BIT_BANG_SOUND -D__DEFAULT_CLEAR_SCREEN \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	-create-app	\
	-o FULL_$@
	rm FULL_$@
	mv FULL_$@.wav $(BUILD_PATH)/X$(GAME_NAME)_$@.wav
	mv FULL_$@.t88 $(BUILD_PATH)/X$(GAME_NAME)_$@.t88


#################################################################

samcoupe: $(ASSETS_PATH)/z88dk_xchase.asm
	$(Z88DK_PATH)$(MYZ88DK) +sam $(SCCZ80_OPTS) $(INCLUDE_OPTS) -create-app \
	-D__SAM__ -D_XL_NO_JOYSTICK  \
	-D__CONIO_GRAPHICS  \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_SAMCOUPE_SLOWDOWN) \
	-clib=ansi -pragma-define:ansicolumns=32 -vn \
	-D__BIT_BANG_SOUND -o $(BUILD_PATH)/FULL_samcoupe.bin -lndos \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm
	rm $(BUILD_PATH)/FULL_samcoupe.bin
	mv $(BUILD_PATH)/FULL_samcoupe.mgt $(BUILD_PATH)/X$(GAME_NAME)_$@.mgt


#################################################################

#############################
# SC3000

sc3000: sc3000_32k

sc3000_32k: $(ASSETS_PATH)/z88dk_xchase.asm
	$(Z88DK_PATH)$(MYZ88DK) +sc3000 $(SCCZ80_OPTS)  \
	$(INCLUDE_OPTS) \
	-D__SC3000__ \
	 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_SC3000_SLOWDOWN) \
	-D__BIT_BANG_SOUND \
	  \
	-DZ88DK_JOYSTICK \
	-D__CONIO_GRAPHICS \
	-vn -lndos -create-app -Cz--audio \
	-pragma-define:CRT_ORG_BSS=0x8000 \
	-pragma-define:REGISTER_SP=0xFFFF \
	-clib=default -pragma-redirect:fputc_cons=fputc_cons_generic \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.tap

sc3000_rom: $(ASSETS_PATH)/z88dk_xchase.asm
	$(Z88DK_PATH)$(MYZ88DK) +sc3000 $(SCCZ80_ROM_OPTS) -subtype=rom \
	$(INCLUDE_OPTS)  \
	-D__SC3000__ \
	-DZ88DK_JOYSTICK \
	-pragma-define:REGISTER_SP=0xC7FF \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_SC3000_SLOWDOWN) \
	-D__BIT_BANG_SOUND \
	-D__CONIO_GRAPHICS \
	-vn -lndos -create-app \
	-clib=default -pragma-redirect:fputc_cons=fputc_cons_generic \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@_BSS.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@_DATA.bin



#############################
# SG1000

sg1000: $(ASSETS_PATH)/z88dk_xchase.asm
	$(Z88DK_PATH)$(MYZ88DK) +sc3000 $(SCCZ80_ROM_OPTS) -subtype=rom \
	$(INCLUDE_OPTS)  -pragma-define:REGISTER_SP=0xC7FF \
	-D__SC3000__ \
	-DZ88DK_JOYSTICK \
	-DGHOSTS_NUMBER=6 -DBULLETS_NUMBER=3 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_SC3000_SLOWDOWN) \
	-D__BIT_BANG_SOUND \
	  \
	-D__CONIO_GRAPHICS \
	-vn -lndos -create-app \
	 \
	 \
	-clib=default -pragma-redirect:fputc_cons=fputc_cons_generic \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@_BSS.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@_DATA.bin




#################################################################

sms: $(ASSETS_PATH)/z88dk_xchase.asm 
	$(Z88DK_PATH)$(MYZ88DK) +sms $(SCCZ80_ROM_OPTS) $(INCLUDE_OPTS) -pragma-redirect:fputc_cons=fputc_cons_generic \
	-D__SMS__ \
	-DXSize=32 \
	-DYSize=24 \
	-D__BIT_BANG_SOUND \
	-D__CONIO_GRAPHICS  \
	-lndos \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_SMS_SLOWDOWN) \
	 $(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	$(FULL_FILES) \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_sms.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_sms.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_sms_BSS.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_sms_DATA.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_sms_BANK_1F.bin


#################################################################

spectrum: spectrum_48k

spectrum_48k: $(ASSETS_PATH)/z88dk_xchase.asm 
	$(Z88DK_PATH)$(MYZ88DK) +zx $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-pragma-include:$(CFG_PATH)/z88dk/zpragma_clib.inc \
	-pragma-redirect:getk=getk_inkey \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_SPECTRUM_SLOWDOWN) \
	-D__SPECTRUM__ \
	-lndos -create-app \
	-D__CONIO_GRAPHICS \
	-pragma-redirect:fputc_cons=fputc_cons_generic \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@_BANK_7.bin


spectrum_keyboard: spectrum_48k_keyboard


spectrum_48k_keyboard: $(ASSETS_PATH)/z88dk_xchase.asm 
	$(Z88DK_PATH)$(MYZ88DK) +zx $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-pragma-include:$(CFG_PATH)/z88dk/zpragma_clib.inc \
	-pragma-redirect:getk=getk_inkey \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_SPECTRUM_SLOWDOWN) \
	-D__SPECTRUM__ -D_XL_NO_JOYSTICK \
	-lndos -create-app \
	-D__CONIO_GRAPHICS \
	-pragma-redirect:fputc_cons=fputc_cons_generic \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@_BANK_7.bin

#################################################################

trs80_gfx: $(ASSETS_PATH)/z88dk_sprites_definitions.h
	$(Z88DK_PATH)$(MYZ88DK) +trs80 $(SCCZ80_OPTS) -lndos -subtype=disk \
	$(INCLUDE_OPTS)  \
	-pragma-redirect:getk=getk_inkey \
	-pragma-define:REGISTER_SP=0xffb5 \
	-D__TRS80__ \
	-D_XL_NO_JOYSTICK \
	-vn -lndos \
	-D__ALT_PRINT  -D__BIT_BANG_SOUND \
	 \
	-D__Z88DK_SPRITES_GRAPHICS -D__NO_INIT_GRAPHICS \
	 \
	-DLESS_TEXT \
	-create-app \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_TRS80_SLOWDOWN) \
	-o$(BUILD_PATH)/X$(GAME_NAME)_$@S.bin \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.bin


trs80:
	$(Z88DK_PATH)$(MYZ88DK) +trs80 $(SCCZ80_OPTS) -lndos -subtype=disk \
	$(INCLUDE_OPTS) \
	-lm -create-app \
	-D__TRS80__ \
	-D_XL_NO_JOYSTICK -D_XL_NO_UDG \
	-pragma-redirect:getk=getk_inkey \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_TRS80_SLOWDOWN) \
	-D__VT52 \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS  -D__BIT_BANG_SOUND \
	-o$(BUILD_PATH)/X$(GAME_NAME)_$@.bin \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.bin



#################################################################

vg5k: $(ASSETS_PATH)/z88dk_xchase.asm
	$(Z88DK_PATH)$(MYZ88DK) +vg5k $(SCCZ80_OPTS) \
	$(INCLUDE_OPTS) \
	-vn  -D__VG5K__ \
	-lndos -create-app -o $(BUILD_PATH)/X$(GAME_NAME)_vg5k.prg \
	-D__CONIO_GRAPHICS \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_VG5K_SLOWDOWN) \
	-clib=default \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_vg5k.prg


#################################################################
vz200: vz200_24k

vz200_24k: 	
	$(Z88DK_PATH)$(MYZ88DK) +vz $(SCCZ80_OPTS) -vn \
	--hardware-keyboard  --generic-console -D__HARDWARE_KEYBOARD \
	$(INCLUDE_OPTS) -D__TARGET_SPECIFIC_ASCII \
	-D__VZ__ -D_XL_NO_JOYSTICK \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_VZ200_SLOWDOWN) \
	-D__CONIO_GRAPHICS -D_XL_NO_UDG \
	-lndos \
	-create-app -o $(BUILD_PATH)/X$(GAME_NAME)_$@.vz \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/vz200/vz200_init_graphics.c \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.cas


vz200_target_specific:
	$(Z88DK_PATH)$(MYZ88DK) +vz $(SCCZ80_OPTS) -vn \
	--hardware-keyboard  --generic-console -D__HARDWARE_KEYBOARD \
	$(INCLUDE_OPTS) -D__TARGET_SPECIFIC_ASCII -D_XL_NO_JOYSTICK \
	-D__VZ__ -D_XL_NO_COLOR -D__ALT_PRINT \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_VZ200_SLOWDOWN) \
	-D__MEMORY_MAPPED_GRAPHICS -D_XL_NO_UDG \
	-lndos \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	-create-app -o $(BUILD_PATH)/X$(GAME_NAME)_$@.vz \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/vz200/vz200_init_graphics.c \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.cas

#################################################################



zx81_no_gfx: zx81_no_gfx_16k

# -pragma-define:ZX_CHAR_XLATE_MODE=1
zx81_no_gfx_16k:
	$(Z88DK_PATH)$(MYZ88DK) +zx81 $(ZSDCC_OPTS) \
	$(INCLUDE_OPTS) \
	--opt-code-size -pragma-define:ZX_CHAR_XLATE_MODE=1 \
	-vn  -D__TARGET_SPECIFIC_ASCII \
	-D__ZX81__  \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ZX81_SLOWDOWN) $(ZX81_NO_GFX_GAME_OPTS) \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS -D_XL_NO_JOYSTICK \
	-lndos \
	-create-app -o  $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(FULL_FILES)
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg


zx81: zx81_no_gfx

zx81_wrx: zx81_32k_wrx

zx81_16k_wrx: $(ASSETS_PATH)/z88dk_sprites_definitions.h
	$(Z88DK_PATH)$(MYZ88DK) +zx81 $(SCCZ80_OPTS) -subtype=wrx -clib=wrx \
	$(INCLUDE_OPTS) \
	-pragma-include:$(CFG_PATH)/z88dk/zpragma_clib_no_printf.inc \
	-D__NO_SPRITE_TRANSPARENCY \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ZX81_WRX_SLOWDOWN) $(ZX81_GFX_GAME_OPTS) \
	-DXSize=32 \
	-DYSize=22 \
	-vn  \
	-D__ZX81__ \
	-D__Z88DK_SPRITES_GRAPHICS -D__SPRITE_X_STEP=8 -D__SPRITE_Y_STEP=8 \
	-lndos \
	-D_XL_NO_COLOR \
	-D__NO_SCREEN_COLOR_INIT -D_XL_NO_JOYSTICK \
	-D__ALT_PRINT \
	-D__FEWER_SPRITES \
	-create-app -o  $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/zx81/zx81_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg

zx81_32k_wrx: $(ASSETS_PATH)/z88dk_sprites_definitions.h
	$(Z88DK_PATH)$(MYZ88DK) +zx81 $(SCCZ80_OPTS) -subtype=wrx -clib=wrx \
	$(INCLUDE_OPTS) \
	-pragma-include:$(CFG_PATH)/z88dk/zpragma_clib_no_printf.inc \
	-pragma-define:hrgpage=36096  \
	-D__NO_SPRITE_TRANSPARENCY \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ZX81_WRX_SLOWDOWN) $(ZX81_GFX_GAME_OPTS) \
	-DXSize=32 \
	-DYSize=22 \
	-vn  \
	-D__ZX81__ \
	-D__Z88DK_SPRITES_GRAPHICS -D__SPRITE_X_STEP=8 -D__SPRITE_Y_STEP=8 \
	-lndos \
	-D_XL_NO_COLOR \
	-D__NO_SCREEN_COLOR_INIT -D_XL_NO_JOYSTICK \
	-D__ALT_PRINT \
	-D__FEWER_SPRITES \
	-create-app -o  $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/zx81/zx81_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg

zx81_8x6: zx81_8x6_wrx
zx81_8x6_wrx: zx81_32k_8x6_wrx

zx81_16k_8x6_wrx: $(ASSETS_PATH)/z88dk_8x6_sprites_definitions.h
	$(Z88DK_PATH)$(MYZ88DK) +zx81 $(SCCZ80_OPTS) -subtype=wrx -clib=wrx \
	$(INCLUDE_OPTS) \
	-pragma-include:$(CFG_PATH)/z88dk/zpragma_clib_no_printf.inc \
	-D__NO_SPRITE_TRANSPARENCY \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ZX81_8X6_WRX_SLOWDOWN) $(ZX81_GFX_GAME_OPTS) \
	-DXSize=32 \
	-DYSize=32 \
	-vn  \
	-D__ZX81__ \
	-D__Z88DK_SPRITES_GRAPHICS -D__SPRITE_X_STEP=8 -D__SPRITE_Y_STEP=6 -DSPRITE_Y_SIZE=6 \
	-lndos \
	-D_XL_NO_COLOR \
	-D__NO_SCREEN_COLOR_INIT -D_XL_NO_JOYSTICK \
	-D__ALT_PRINT \
	-D__FEWER_SPRITES \
	-create-app -o  $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/zx81/zx81_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg

zx81_32k_8x6_wrx: $(ASSETS_PATH)/z88dk_8x6_sprites_definitions.h
	$(Z88DK_PATH)$(MYZ88DK) +zx81 $(SCCZ80_OPTS) -subtype=wrx -clib=wrx \
	$(INCLUDE_OPTS) \
	-pragma-include:$(CFG_PATH)/z88dk/zpragma_clib_no_printf.inc \
	-pragma-define:hrgpage=36096  \
	-D__NO_SPRITE_TRANSPARENCY \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ZX81_8X6_WRX_SLOWDOWN) $(ZX81_GFX_GAME_OPTS) \
	-DXSize=32 \
	-DYSize=32 \
	-vn  \
	-D__ZX81__ \
	-D__Z88DK_SPRITES_GRAPHICS -D__SPRITE_X_STEP=8 -D__SPRITE_Y_STEP=6 -DSPRITE_Y_SIZE=6 \
	-lndos \
	-D_XL_NO_COLOR \
	-D__NO_SCREEN_COLOR_INIT -D_XL_NO_JOYSTICK \
	-D__ALT_PRINT \
	-D__FEWER_SPRITES \
	-create-app -o  $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/zx81/zx81_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg


zx81_wrx64: zx81_32k_wrx64

zx81_16k_wrx64: $(ASSETS_PATH)/z88dk_sprites_definitions.h
	$(Z88DK_PATH)$(MYZ88DK) +zx81 $(SCCZ80_OPTS) -subtype=wrx64 -clib=wrx \
	$(INCLUDE_OPTS) \
	-pragma-include:$(CFG_PATH)/z88dk/zpragma_clib_no_printf.inc \
	-D__NO_SPRITE_TRANSPARENCY \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ZX81_WRX64_SLOWDOWN) $(ZX81_GFX_GAME_OPTS) \
	-DXSize=32 \
	-DYSize=8 \
	-vn  \
	-D__ZX81__ \
	-D__Z88DK_SPRITES_GRAPHICS -D__SPRITE_X_STEP=8 -D__SPRITE_Y_STEP=8 \
	-lndos \
	-D_XL_NO_COLOR \
	-D__NO_SCREEN_COLOR_INIT -D_XL_NO_JOYSTICK \
	-D__ALT_PRINT \
	-D__FEWER_SPRITES \
	-create-app -o  $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/zx81/zx81_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg

zx81_32k_wrx64: $(ASSETS_PATH)/z88dk_sprites_definitions.h
	$(Z88DK_PATH)$(MYZ88DK) +zx81 $(SCCZ80_OPTS) -subtype=wrx64 -clib=wrx \
	$(INCLUDE_OPTS) \
	-pragma-include:$(CFG_PATH)/z88dk/zpragma_clib_no_printf.inc \
	-pragma-define:hrgpage=36096  \
	-D__NO_SPRITE_TRANSPARENCY \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ZX81_WRX64_SLOWDOWN) $(ZX81_GFX_GAME_OPTS) \
	-DXSize=32 \
	-DYSize=8 \
	-vn  \
	-D__ZX81__ \
	-D__Z88DK_SPRITES_GRAPHICS -D__SPRITE_X_STEP=8 -D__SPRITE_Y_STEP=8 \
	-lndos \
	-D_XL_NO_COLOR \
	-D__NO_SCREEN_COLOR_INIT -D_XL_NO_JOYSTICK \
	-D__ALT_PRINT \
	-D__FEWER_SPRITES \
	-create-app -o  $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/zx81/zx81_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg


zx81_wrx128: zx81_32k_wrx128

zx81_16k_wrx128: $(ASSETS_PATH)/z88dk_sprites_definitions.h
	$(Z88DK_PATH)$(MYZ88DK) +zx81 $(SCCZ80_OPTS) -subtype=wrx128 -clib=wrx \
	$(INCLUDE_OPTS) \
	-pragma-include:$(CFG_PATH)/z88dk/zpragma_clib_no_printf.inc \
	-D__NO_SPRITE_TRANSPARENCY \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ZX81_WRX128_SLOWDOWN) $(ZX81_GFX_GAME_OPTS) \
	-DXSize=32 \
	-DYSize=16 \
	-vn  \
	-D__ZX81__ \
	-D__Z88DK_SPRITES_GRAPHICS -D__SPRITE_X_STEP=8 -D__SPRITE_Y_STEP=8 \
	-lndos \
	-D_XL_NO_COLOR \
	-D__NO_SCREEN_COLOR_INIT -D_XL_NO_JOYSTICK \
	-D__ALT_PRINT \
	-D__FEWER_SPRITES \
	-create-app -o  $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/zx81/zx81_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg

zx81_32k_wrx128: $(ASSETS_PATH)/z88dk_sprites_definitions.h
	$(Z88DK_PATH)$(MYZ88DK) +zx81 $(SCCZ80_OPTS) -subtype=wrx128 -clib=wrx \
	$(INCLUDE_OPTS) \
	-pragma-include:$(CFG_PATH)/z88dk/zpragma_clib_no_printf.inc \
	-pragma-define:hrgpage=36096  \
	-D__NO_SPRITE_TRANSPARENCY \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ZX81_WRX128_SLOWDOWN) $(ZX81_GFX_GAME_OPTS) \
	-DXSize=32 \
	-DYSize=16 \
	-vn  \
	-D__ZX81__ \
	-D__Z88DK_SPRITES_GRAPHICS -D__SPRITE_X_STEP=8 -D__SPRITE_Y_STEP=8 \
	-lndos \
	-D_XL_NO_COLOR \
	-D__NO_SCREEN_COLOR_INIT -D_XL_NO_JOYSTICK \
	-D__ALT_PRINT \
	-D__FEWER_SPRITES \
	-create-app -o  $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/zx81/zx81_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg


zx81_8x6_wrx128: zx81_32k_8x6_wrx128

zx81_16k_8x6_wrx128: $(ASSETS_PATH)/z88dk_8x6_sprites_definitions.h
	$(Z88DK_PATH)$(MYZ88DK) +zx81 $(SCCZ80_OPTS) -subtype=wrx -clib=wrx128 \
	$(INCLUDE_OPTS) \
	-pragma-include:$(CFG_PATH)/z88dk/zpragma_clib_no_printf.inc \
	-D__NO_SPRITE_TRANSPARENCY \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ZX81_8X6_WRX128_SLOWDOWN) $(ZX81_GFX_GAME_OPTS) \
	-DXSize=32 \
	-DYSize=21 \
	-vn  \
	-D__ZX81__ \
	-D__Z88DK_SPRITES_GRAPHICS -D__SPRITE_X_STEP=8 -D__SPRITE_Y_STEP=6 -DSPRITE_Y_SIZE=6 \
	-lndos \
	-D_XL_NO_COLOR \
	-D__NO_SCREEN_COLOR_INIT -D_XL_NO_JOYSTICK \
	-D__ALT_PRINT \
	-D__FEWER_SPRITES \
	-create-app -o  $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/zx81/zx81_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg

zx81_32k_8x6_wrx128: $(ASSETS_PATH)/z88dk_8x6_sprites_definitions.h
	$(Z88DK_PATH)$(MYZ88DK) +zx81 $(SCCZ80_OPTS) -subtype=wrx -clib=wrx128 \
	$(INCLUDE_OPTS) \
	-pragma-include:$(CFG_PATH)/z88dk/zpragma_clib_no_printf.inc \
	-pragma-define:hrgpage=36096  \
	-D__NO_SPRITE_TRANSPARENCY \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ZX81_8X6_WRX128_SLOWDOWN) $(ZX81_GFX_GAME_OPTS) \
	-DXSize=32 \
	-DYSize=21 \
	-vn  \
	-D__ZX81__ \
	-D__Z88DK_SPRITES_GRAPHICS -D__SPRITE_X_STEP=8 -D__SPRITE_Y_STEP=6 -DSPRITE_Y_SIZE=6 \
	-lndos \
	-D_XL_NO_COLOR \
	-D__NO_SCREEN_COLOR_INIT -D_XL_NO_JOYSTICK \
	-D__ALT_PRINT \
	-D__FEWER_SPRITES \
	-create-app -o  $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/zx81/zx81_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg


zx81_8x6_wrx64: zx81_32k_8x6_wrx64

zx81_16k_8x6_wrx64: $(ASSETS_PATH)/z88dk_8x6_sprites_definitions.h
	$(Z88DK_PATH)$(MYZ88DK) +zx81 $(SCCZ80_OPTS) -subtype=wrx -clib=wrx64 \
	$(INCLUDE_OPTS) \
	-pragma-include:$(CFG_PATH)/z88dk/zpragma_clib_no_printf.inc \
	-D__NO_SPRITE_TRANSPARENCY \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ZX81_8X6_WRX64_SLOWDOWN) $(ZX81_GFX_GAME_OPTS) \
	-DXSize=32 \
	-DYSize=11 \
	-vn  \
	-D__ZX81__ \
	-D__Z88DK_SPRITES_GRAPHICS -D__SPRITE_X_STEP=8 -D__SPRITE_Y_STEP=6 -DSPRITE_Y_SIZE=6 \
	-lndos \
	-D_XL_NO_COLOR \
	-D__NO_SCREEN_COLOR_INIT -D_XL_NO_JOYSTICK \
	-D__ALT_PRINT \
	-D__FEWER_SPRITES \
	-create-app -o  $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/zx81/zx81_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg

zx81_32k_8x6_wrx64: $(ASSETS_PATH)/z88dk_8x6_sprites_definitions.h
	$(Z88DK_PATH)$(MYZ88DK) +zx81 $(SCCZ80_OPTS) -subtype=wrx -clib=wrx64 \
	$(INCLUDE_OPTS) \
	-pragma-include:$(CFG_PATH)/z88dk/zpragma_clib_no_printf.inc \
	-pragma-define:hrgpage=36096  \
	-D__NO_SPRITE_TRANSPARENCY \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_ZX81_8X6_WRX64_SLOWDOWN) $(ZX81_GFX_GAME_OPTS) \
	-DXSize=32 \
	-DYSize=11 \
	-vn  \
	-D__ZX81__ \
	-D__Z88DK_SPRITES_GRAPHICS -D__SPRITE_X_STEP=8 -D__SPRITE_Y_STEP=6 -DSPRITE_Y_SIZE=6 \
	-lndos \
	-D_XL_NO_COLOR \
	-D__NO_SCREEN_COLOR_INIT -D_XL_NO_JOYSTICK \
	-D__ALT_PRINT \
	-D__FEWER_SPRITES \
	-create-app -o  $(BUILD_PATH)/X$(GAME_NAME)_$@.prg \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/zx81/zx81_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.prg


#################################################################


z1013:
	$(Z88DK_PATH)$(MYZ88DK) +z1013 $(SCCZ80_OPTS) $(INCLUDE_OPTS) -clib=ansi \
	-vn -lndos \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_Z1013_SLOWDOWN) \
	-D__Z1013__     \
	-D__CONIO_GRAPHICS -D__NO_INIT_GRAPHICS -D_XL_NO_JOYSTICK -D_XL_NO_UDG \
	$(FULL_FILES) \
	-create-app -o $(BUILD_PATH)/X$(GAME_NAME)_$@
	# mv $(SOURCE_PATH)/../../Z1013.Z80 $(BUILD_PATH)/X$(GAME_NAME)_z1013.z80
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@


#############################
# Z9001

# --generic-console
z9001_krt_gfx: $(ASSETS_PATH)/z88dk_xchase.asm
	$(Z88DK_PATH)$(MYZ88DK) +z9001 $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-D__Z9001__ -vn  -D__SCREEN_MODE=1 -D_XL_NO_JOYSTICK  \
	-D__CONIO_GRAPHICS  -D__BIT_BANG_SOUND --generic-console \
	-lndos -create-app -o $(BUILD_PATH)/X$(GAME_NAME)_$@.z80 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_Z9001_SLOWDOWN) \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm

z9001:
	$(Z88DK_PATH)$(MYZ88DK) +z9001 $(SCCZ80_OPTS) $(INCLUDE_OPTS) \
	-D__Z9001__ -vn  -D__SCREEN_MODE=1 -D_XL_NO_JOYSTICK  \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_Z9001_SLOWDOWN) \
	-D__CONIO_GRAPHICS -D_XL_NO_UDG -D__NO_INIT_GRAPHICS -D__BIT_BANG_SOUND --generic-console \
	-lndos -create-app -o $(BUILD_PATH)/X$(GAME_NAME)_$@.z80 \
	$(FULL_FILES) \
	$(ASSETS_PATH)/z88dk_xchase.asm

#############################
# KC

kc: $(ASSETS_PATH)/z88dk_xchase.asm 
	$(Z88DK_PATH)$(MYZ88DK) +kc $(SCCZ80_OPTS) -subtype=tap $(INCLUDE_OPTS) \
	-D__KC__ \
	-D__VT52 \
	-D__CONIO_GRAPHICS -D_XL_NO_JOYSTICK \
	-lndos \
	-clib=default -pragma-redirect:fputc_cons=fputc_cons_generic \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_KC_SLOWDOWN) \
	$(CROSS_LIB_PATH)/display/init_graphics/z88dk/udg/udg_init_graphics.c \
	$(ASSETS_PATH)/z88dk_xchase.asm \
	$(FULL_FILES) \
	-create-app -o$(BUILD_PATH)/X$(GAME_NAME)_kc.bin
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_kc.bin



#################################################################
# CMOC


#################################################################

CMOC_NO_UDG_OPTS        ?= $(CMOC_MAKEFILE_COMPILATION_OPTS) -Wno-const  -D__ALT_SLEEP  -D__DEFAULT_CLEAR_SCREEN -D__CMOC__  

NO_UDG_OPS              ?= $(CMOC_NO_UDG_OPTS) -D__MEMORY_MAPPED_GRAPHICS -D__NO_INIT_GRAPHICS -D_XL_NO_UDG -D__ALT_PRINT -D_XL_SLOW_DOWN_FACTOR=4000

COCO_OPTS               ?= -D__COCO__ $(NO_UDG_OPS) -D_XL_NO_COLOR  -D_XL_NO_JOYSTICK

DRAGON_OPTS             ?= --dragon -D__COCO__ $(NO_UDG_OPS) -D_XL_NO_COLOR  -D_XL_NO_JOYSTICK


COCO_COMPILE_OPTS       ?= $(COCO_OPTS) 

DRAGON_COMPILE_OPTS     ?= $(DRAGON_OPTS) 


DRAGON_GFX_OPTS         ?= --dragon -D__DRAGON__ $(GFX_OPTS) -D_XL_NO_JOYSTICK

DRAGON_GFX_COMPILE_OPTS ?= $(DRAGON_GFX_OPTS) 

CMOC_OPTS               ?= $(CMOC_MAKEFILE_COMPILATION_OPTS) -Wno-const  -D__ALT_SLEEP  -D__DEFAULT_CLEAR_SCREEN -D__CMOC__  


GFX_OPTS                ?= $(CMOC_OPTS) -D__BIT_MAPPED_GRAPHICS -D__ALT_PRINT -D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_COCO_SLOWDOWN)


COCO_GFX_OPTS           ?= -D__COCO__ $(GFX_OPTS) -D_XL_NO_COLOR -D_XL_NO_JOYSTICK



COCO_GFX_COMPILE_OPTS      ?= $(COCO_GFX_OPTS)  


# ? BACKGROUND_COLOR white
GFX_COLOR_OPTS              ?= $(CMOC_OPTS)  -D_XL_NO_JOYSTICK -D__BIT_MAPPED_GRAPHICS -D__ALT_PRINT   

COCO_COLOR_GFX_OPTS         ?= -D__COCO__ $(GFX_COLOR_OPTS) -D__BIT_MAPPED_4_GRAPHICS $(COCO_COLOR_GFX_GAME_OPTS) -D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_COCO_SLOWDOWN)

COCO_COLOR_GFX_COMPILE_OPTS ?= $(COCO_COLOR_GFX_OPTS)

COCO3_COLOR_GFX_OPTS         ?= -D__COCO3__ $(GFX_COLOR_OPTS) -D__BIT_MAPPED_16_GRAPHICS $(COCO3_COLOR_GFX_GAME_OPTS) -DXSize=32 -DYSize=24 -D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_COCO3_SLOWDOWN)

COCO3_COLOR_GFX_COMPILE_OPTS ?= $(COCO3_COLOR_GFX_OPTS)

THOMSON_OPTS    ?= $(CMOC_MAKEFILE_COMPILATION_OPTS) -D__ALT_SLEEP  -Wno-const -D__CMOC__ -D__BIT_MAPPED_GRAPHICS -D__ALT_PRINT

MO5_OPTS        ?= $(THOMSON_OPTS)  -DXSize=39 -D_XL_NO_JOYSTICK -D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_MO5_SLOWDOWN) -D__MO5__

TO7_OPTS        ?= $(THOMSON_OPTS)  -DXSize=39 -D_XL_NO_JOYSTICK -D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_TO7_SLOWDOWN) -D__TO7__ 

TO7_ORG_DATA    ?= --org=a000 

#############################################################################################


dragon: coco
dragon_mono: coco_mono

ifdef USE_TOOLS
coco_mono: $(ASSETS_PATH)/cmoc_udc_tiles_and_fonts.s $(TOOLS_PATH)/cmoc/coco/file2dsk/file2dsk$(COMPILEDEXT)
else
coco_mono: $(ASSETS_PATH)/cmoc_udc_tiles_and_fonts.s
endif
	$(CMOC) \
	$(COCO_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/sound/generic/dac_sounds.c
	$(CMOC) \
	$(COCO_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/display/display_macros.c
	$(CMOC) \
	$(COCO_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/display/init_graphics/cmoc/coco/coco_init_graphics.c
	$(CMOC) \
	$(COCO_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c
	$(CMOC) \
	$(COCO_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	-c $(ASSETS_PATH)/cmoc_udc_tiles_and_fonts.s
	$(CMOC) \
	$(COCO_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/sleep/sleep_macros.c
	$(CMOC) \
	$(COCO_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/input/input_macros.c
	$(CMOC) \
	$(COCO_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	-c $(SOURCE_PATH)/main.c
	$(CMOC) -o $(BUILD_PATH)/XBIN.BIN \
	$(COCO_GFX_OPTS) $(INCLUDE_OPTS) \
	main.o coco_init_graphics.o \
	display_macros.o dac_sounds.o \
	memory_mapped_alt_print.o sleep_macros.o \
	cmoc_udc_tiles_and_fonts.o \
	input_macros.o
	rm main.o dac_sounds.o coco_init_graphics.o display_macros.o sleep_macros.o \
	cmoc_udc_tiles_and_fonts.o \
	memory_mapped_alt_print.o \
	input_macros.o
ifdef USE_TOOLS	
	mv $(BUILD_PATH)/XBIN.BIN XBIN.BIN
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.dsk
	$(TOOLS_PATH)/cmoc/coco/file2dsk/file2dsk$(COMPILEDEXT) XBIN.BIN
	mv XBIN.DSK $(BUILD_PATH)/X$(GAME_NAME)_$@.dsk
	$(TOOLS_PATH)/cmoc/dragon/bin2cas.pl -o $(BUILD_PATH)/X$(GAME_NAME)_coco_dragon_mono.cas -C XBIN.BIN -A
else
	mv $(BUILD_PATH)/XBIN.BIN $(BUILD_PATH)/X$(GAME_NAME)_$@_dragon.bin
endif
ifeq ($(DO_WIN),1)   
ifdef USE_TOOLS
	$(TOOLS_PATH)/cmoc/dragon/File2VDK.exe $(BUILD_PATH)/XBIN.BIN
	mv $(BUILD_PATH)/XBIN.BIN.vdk $(BUILD_PATH)/X$(GAME_NAME)_dragon_mono.vdk
endif
endif
	rm -rf $(BUILD_PATH)/XBIN.BIN
	rm -rf XBIN.BIN
	rm -rf A80
	rm -rf A80.LDR


coco_targets: \
    coco coco_mono coco3

coco_color: coco
dragon_color: dragon

ifdef USE_TOOLS
coco: $(ASSETS_PATH)/cmoc_udc_tiles_and_fonts.s $(TOOLS_PATH)/cmoc/coco/file2dsk/file2dsk$(COMPILEDEXT)
else
coco: $(ASSETS_PATH)/cmoc_udc_tiles_and_fonts.s
endif
	$(CMOC) \
	$(COCO_COLOR_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/sound/generic/dac_sounds.c
	$(CMOC) \
	$(COCO_COLOR_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/display/display_macros.c
	$(CMOC) \
	$(COCO_COLOR_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/display/init_graphics/cmoc/coco/coco_init_graphics.c
	$(CMOC) \
	$(COCO_COLOR_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c
	$(CMOC) \
	$(COCO_COLOR_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	-c $(ASSETS_PATH)/cmoc_udc_tiles_and_fonts.s
	$(CMOC) \
	$(COCO_COLOR_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/sleep/sleep_macros.c
	$(CMOC) \
	$(COCO_COLOR_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/input/input_macros.c
	$(CMOC) \
	$(COCO_COLOR_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	-c $(SOURCE_PATH)/main.c
	$(CMOC) -o $(BUILD_PATH)/XBIN.BIN \
	$(COCO_COLOR_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	main.o coco_init_graphics.o \
	display_macros.o dac_sounds.o \
	memory_mapped_alt_print.o sleep_macros.o \
	cmoc_udc_tiles_and_fonts.o \
	input_macros.o
	rm main.o dac_sounds.o coco_init_graphics.o display_macros.o sleep_macros.o \
	cmoc_udc_tiles_and_fonts.o \
	memory_mapped_alt_print.o \
	input_macros.o
ifdef USE_TOOLS	
	mv $(BUILD_PATH)/XBIN.BIN XBIN.BIN
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.dsk
	$(TOOLS_PATH)/cmoc/coco/file2dsk/file2dsk$(COMPILEDEXT) XBIN.BIN
	mv XBIN.DSK $(BUILD_PATH)/X$(GAME_NAME)_$@.dsk
	$(TOOLS_PATH)/cmoc/dragon/bin2cas.pl -o $(BUILD_PATH)/X$(GAME_NAME)_coco_dragon.cas -C XBIN.BIN -A
else
	mv $(BUILD_PATH)/XBIN.BIN $(BUILD_PATH)/X$(GAME_NAME)_$@_dragon.bin
endif
ifeq ($(DO_WIN),1)   
ifdef USE_TOOLS
	$(TOOLS_PATH)/cmoc/dragon/File2VDK.exe $(BUILD_PATH)/XBIN.BIN
	mv $(BUILD_PATH)/XBIN.BIN.vdk $(BUILD_PATH)/X$(GAME_NAME)_dragon.vdk
endif
endif
	rm -rf $(BUILD_PATH)/XBIN.BIN
	rm -rf XBIN.BIN
	rm -rf A80
	rm -rf A80.LDR


# coco3: coco3_gfx
	
coco3: $(ASSETS_PATH)/cmoc_udc_tiles_and_fonts.s $(TOOLS_PATH)/cmoc/coco/file2dsk/file2dsk$(COMPILEDEXT)
	$(CMOC) \
	$(COCO3_COLOR_GFX_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/sound/generic/dac_sounds.c
	$(CMOC) \
	$(COCO3_COLOR_GFX_OPTS) $(INCLUDE_OPTS) \
	-c $(ASSETS_PATH)/cmoc_udc_tiles_and_fonts.s
	$(CMOC) \
	$(COCO3_COLOR_GFX_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/display/display_macros.c
	$(CMOC) \
	$(COCO3_COLOR_GFX_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/display/init_graphics/cmoc/coco3/coco3_init_graphics.c
	$(CMOC) \
	$(COCO3_COLOR_GFX_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c
	$(CMOC) \
	$(COCO3_COLOR_GFX_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/input/input_macros.c
	$(CMOC) \
	$(COCO3_COLOR_GFX_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/sleep/sleep_macros.c
	$(CMOC) -o $(BUILD_PATH)/xbin.bin \
	$(COCO3_COLOR_GFX_OPTS) $(INCLUDE_OPTS) \
	$(SOURCE_PATH)/main.c \
	display_macros.o dac_sounds.o sleep_macros.o \
	coco3_init_graphics.o \
	memory_mapped_alt_print.o \
	input_macros.o cmoc_udc_tiles_and_fonts.o
	rm -rf \
	display_macros.o dac_sounds.o sleep_macros.o \
	coco3_init_graphics.o \
	memory_mapped_alt_print.o \
	input_macros.o cmoc_udc_tiles_and_fonts.o
ifdef USE_TOOLS
	mv $(BUILD_PATH)/xbin.bin XBIN.BIN
	rm -rf $(BUILD_PATH)/X$(GAME_NAME)_$@.dsk
	$(TOOLS_PATH)/cmoc/coco/file2dsk/file2dsk$(COMPILEDEXT) XBIN.BIN
	mv XBIN.DSK $(BUILD_PATH)/X$(GAME_NAME)_$@.dsk
	$(TOOLS_PATH)/cmoc/dragon/bin2cas.pl -o $(BUILD_PATH)/X$(GAME_NAME)_$@.cas -C XBIN.BIN -A
	rm XBIN.BIN
else
	mv $(BUILD_PATH)/xbin.bin $(BUILD_PATH)/X$(GAME_NAME)_$@_dragon.bin
endif


coco3_targets: \
	coco3_gfx


########################################


ifdef USE_TOOLS
mo5: $(ASSETS_PATH)/cmoc_udc_tiles.s $(TOOLS_PATH)/cmoc/mo5/f2k5$(COMPILEDEXT) $(TOOLS_PATH)/cmoc/mo5/sapfs$(COMPILEDEXT)
else
mo5: $(ASSETS_PATH)/cmoc_udc_tiles.s
endif
	$(CMOC) \
	$(MO5_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/sound/generic/dac_sounds.c
	$(CMOC) \
	$(MO5_OPTS)  $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/display/alt_print/mo5_alt_print.c 
	$(CMOC) \
	$(MO5_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/sleep/sleep_macros.c
	$(CMOC) \
	$(MO5_OPTS)  $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/display/init_graphics/cmoc/mo5/mo5_init_graphics.c
	$(CMOC) \
	$(MO5_OPTS)  $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/display/display_macros.c
	$(CMOC) \
	$(MO5_OPTS)  $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/input/input_macros.c
	$(CMOC) \
	$(MO5_OPTS)  $(INCLUDE_OPTS) \
	-c $(ASSETS_PATH)/cmoc_udc_tiles.s	
	$(CMOC) -o $(BUILD_PATH)/FULL_MO5.bin \
	$(MO5_OPTS)  $(INCLUDE_OPTS) \
	$(SOURCE_PATH)/main.c \
	mo5_alt_print.o dac_sounds.o \
	mo5_init_graphics.o \
	display_macros.o \
	cmoc_udc_tiles.o \
	sleep_macros.o \
	input_macros.o
	rm \
	mo5_alt_print.o dac_sounds.o \
	cmoc_udc_tiles.o \
	mo5_init_graphics.o \
	display_macros.o \
	\
	input_macros.o sleep_macros.o
ifdef USE_TOOLS
	$(TOOLS_PATH)/cmoc/mo5/f2k5$(COMPILEDEXT) $(BUILD_PATH)/FULL_MO5.bin
	mv $(BUILD_PATH)/FULL_MO5.bin .
	$(TOOLS_PATH)/cmoc/mo5/sapfs$(COMPILEDEXT) -c X$(GAME_NAME)_MO5.sap
	$(TOOLS_PATH)/cmoc/mo5/sapfs$(COMPILEDEXT) --add X$(GAME_NAME)_MO5.sap FULL_MO5.bin
	mv ./X$(GAME_NAME)_MO5.sap $(BUILD_PATH)
	mv ./FILE.K5 $(BUILD_PATH)/X$(GAME_NAME)_MO5.k5
	rm ./FULL_MO5.bin
else
	mv $(BUILD_PATH)/FULL_MO5.bin $(BUILD_PATH)/X$(GAME_NAME)_MO5.bin
endif


mo5_targets: \
	mo5

ifdef USE_TOOLS
to7: $(ASSETS_PATH)/cmoc_udc_tiles.s $(TOOLS_PATH)/cmoc/mo5/sapfs$(COMPILEDEXT)
else
to7: $(ASSETS_PATH)/cmoc_udc_tiles.s
endif
	$(CMOC) \
	$(TO7_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/sound/generic/dac_sounds.c	
	$(CMOC) \
	$(TO7_OPTS)  $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/display/alt_print/mo5_alt_print.c 
	$(CMOC) \
	$(TO7_OPTS)  $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/display/init_graphics/cmoc/mo5/mo5_init_graphics.c
	$(CMOC) \
	$(TO7_OPTS)  $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/display/display_macros.c
	$(CMOC) \
	$(COCO_GFX_COMPILE_OPTS) $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/sleep/sleep_macros.c
	$(CMOC) \
	$(TO7_OPTS)  $(INCLUDE_OPTS) \
	-c $(CROSS_LIB_PATH)/input/input_macros.c
	$(CMOC) \
	$(TO7_OPTS)  $(INCLUDE_OPTS) \
	-c $(ASSETS_PATH)/cmoc_udc_tiles.s	
	$(CMOC) $(TO7_ORG_DATA) -o $(BUILD_PATH)/XLIB.bin \
	$(TO7_OPTS)  $(INCLUDE_OPTS) \
	$(SOURCE_PATH)/main.c \
	mo5_alt_print.o dac_sounds.o \
	mo5_init_graphics.o \
	display_macros.o \
	cmoc_udc_tiles.o \
	\
	input_macros.o sleep_macros.o
	rm \
	mo5_alt_print.o dac_sounds.o \
	cmoc_udc_tiles.o \
	mo5_init_graphics.o \
	display_macros.o \
	\
	input_macros.o sleep_macros.o
ifdef USE_TOOLS
	mv $(BUILD_PATH)/XLIB.bin .
	$(TOOLS_PATH)/cmoc/mo5/sapfs$(COMPILEDEXT) -c X$(GAME_NAME)_TO7.sap
	$(TOOLS_PATH)/cmoc/mo5/sapfs$(COMPILEDEXT) --add X$(GAME_NAME)_TO7.sap XLIB.bin
	mv ./X$(GAME_NAME)_TO7.sap $(BUILD_PATH)
	rm ./XLIB.bin
else
	mv $(BUILD_PATH)/XLIB.bin $(BUILD_PATH)/X$(GAME_NAME)_TO7.bin
endif


to7_targets: \
	to7

#################################################################
# LCC1802


#################################################################


full_combo_rand.c: 
	cat  $(FULL_FILES) > $(SOURCE_PATH)/../full_combo_rand.c

# ------------------------------------------------------------------------------------------
# LCC1802
#    -target=xr18CX
# https://sites.google.com/site/lcc1802/downloads/Quarrantine.zip?attredirects=0&d=1


#/cygdrive/c/lcc42/bat/caCX.bat
#/cygdrive/c/lcc42/bin/lcc.exe
LCC1802_OPTS ?= -target=xr18CX $(LCC1802_MAKEFILE_COMPILATION_OPTS)
BASIC_OPTS ?= $(LCC1802_OPTS) "-Wa-D LCCCX=1"
COMX_OPTS ?= $(BASIC_OPTS) "-Wa-D CODELOC=0x4401" 
PECOM_OPTS ?= $(BASIC_OPTS) "-Wa-D CODELOC=0x201" 
TMC600_OPTS ?= $(BASIC_OPTS) "-Wa-D CODELOC=0x6300"
CIDELSA_OPTS ?= $(LCC1802_OPTS)  "-Wa-D CODELOC=0"  "-Wa-D NOFILLBSS=1" 
DRACO_32K_OPTS ?= $(CIDELSA_OPTS) "-Wa-D DATALOC=0x8000" "-Wa-D STACKLOC=0x83ff"
DRACO_16K_OPTS ?= $(CIDELSA_OPTS)  "-Wa-D DATALOC=0x4000" "-Wa-D STACKLOC=0x43ff"
ALTAIR_24K_OPTS ?= $(CIDELSA_OPTS) "-Wa-D DATALOC=0x6000" "-Wa-D STACKLOC=0x60ff"
ALTAIR_12K_OPTS ?= $(CIDELSA_OPTS) "-Wa-D DATALOC=0x3000" "-Wa-D STACKLOC=0x30ff"
DESTROYER_12K_OPTS ?= $(CIDELSA_OPTS) "-Wa-D DATALOC=0x3000" "-Wa-D STACKLOC=0x30ff"
DESTROYER_8K_OPTS ?= $(CIDELSA_OPTS) "-Wa-D DATALOC=0x2000" "-Wa-D STACKLOC=0x20ff"

PIXIE_4K_OPTS ?= "-Wa-D LCCCX=1" -D__VIP__ -DRES=64 -DVIDMEM=0xF00 "-Wa-D STACKLOC=0xDFF"


MICROBOARD_OPTS ?= $(CIDELSA_OPTS) "-Wa-D DATALOC=0x8000" "-Wa-D STACKLOC=0x9fff"

MICROBOARD_PAL_1_OPTS ?= $(MICROBOARD_OPTS) "-DPAL=1"
MICROBOARD_PAL_2_OPTS ?= $(MICROBOARD_OPTS) "-DPAL=2"

MICROBOARD_NTSC_1_OPTS ?= $(CIDELSA_OPTS) "-DNTSC=1"
MICROBOARD_NTSC_3_OPTS ?= $(CIDELSA_OPTS) "-DNTSC=3"

# @c:\lcc42\bin\lcc.exe "-target=xr18CX" "-Wf-g,;"  "-Wf-volatile" -O "-Wp-D nofloats" "-Wa-D LCCNOLONG" -D__MICRO__ -DNTSC=1 -S %2 %3 %4 %5 %6 %1.c 
# @IF ERRORLEVEL 1 GOTO quit
# @c:\lcc42\bin\copt c:\lcc42\include\lcc1806.opt -I %1.asm -O %1.oasm
# @c:\lcc42\bin\asw -cpu 1802 -quiet -D NOFILLBSS=1 -D DATALOC=0x8000 -D CODELOC=0 -D STACKLOC=0x9fff -P -x -i ..\..\..\include -L %1.oasm
# @c:\lcc42\bin\p2hex -r $-$ %1 %1_microboard_ntsc1_4_8 | more +2
# @:quit


# @c:\lcc42\bin\lcc.exe "-target=xr18CX" "-Wf-g,;"  "-Wf-volatile" -O "-Wp-D nofloats" "-Wa-D LCCNOLONG" -D__MICRO__ -DNTSC=3 -S %2 %3 %4 %5 %6 %1.c 
# @IF ERRORLEVEL 1 GOTO quit
# @c:\lcc42\bin\copt c:\lcc42\include\lcc1806.opt -I %1.asm -O %1.oasm
# @c:\lcc42\bin\asw -cpu 1802 -quiet -D NOFILLBSS=1 -D DATALOC=0x8000 -D CODELOC=0 -D STACKLOC=0x9fff -P -x -i ..\..\..\include -L %1.oasm
# @c:\lcc42\bin\p2hex -r $-$ %1 %1_microboard_ntsc3 | more +2
# @:quit



################################################################################



COMX_REDUCED_EXTRA_FILES ?= \
	$(CROSS_LIB_PATH)/display/init_graphics/lcc1802/comx/comx_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/comx_alt_print.c 

COMX_COLOR_GRAPHICS_REDUCED_EXTRA_FILES ?= \
	$(CROSS_LIB_PATH)/display/init_graphics/lcc1802/comx/comx_color_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/comx_alt_print.c 

COMX_EXTRA_FILES ?= \
	$(COMX_REDUCED_EXTRA_FILES) \
	$(CROSS_LIB_PATH)/rand/rand.c \
	$(CROSS_LIB_PATH)/sound/lcc1802/comx/comx_sounds.c

COMX_COLOR_GRAPHICS_EXTRA_FILES ?= \
	$(COMX_COLOR_GRAPHICS_REDUCED_EXTRA_FILES) \
	$(CROSS_LIB_PATH)/sound/lcc1802/comx/comx_sounds.c

COMX_EXTRA_FILES_WTIH_END_SCREEN ?= \
	$(COMX_EXTRA_FILES) 

COMX_COLOR_GRAPHICS_EXTRA_FILES_WTIH_END_SCREEN ?= \
	$(COMX_COLOR_GRAPHICS_EXTRA_FILES)


reduced_full_lcc1802_combo.c: full_combo_rand.c
	cat \
	$(COMX_REDUCED_EXTRA_FILES) $(CROSS_LIB_PATH)/rand/rand_lcc1802_devkit_include.c \
	$(SOURCE_PATH)/../full_combo_rand.c > $(SOURCE_PATH)/../reduced_full_lcc1802_combo.c

reduced_full_lcc1802_color_combo.c: full_combo_rand.c
	cat \
	$(COMX_COLOR_GRAPHICS_EXTRA_FILES) $(CROSS_LIB_PATH)/rand/rand_lcc1802_devkit_include.c \
	$(SOURCE_PATH)/../full_combo_rand.c > $(SOURCE_PATH)/../reduced_full_lcc1802_color_combo.c

full_lcc1802_combo.c: full_combo_rand.c
	cat \
	$(CROSS_LIB_PATH)/rand/rand_lcc1802_devkit_include.c \
	$(COMX_EXTRA_FILES_WTIH_END_SCREEN) \
	$(SOURCE_PATH)/../full_combo_rand.c > $(SOURCE_PATH)/../full_lcc1802_combo.c


reduced_full_lcc1802_micro_combo.c: full_combo_rand.c
	cat \
	$(MICRO_COLOR_REDUCED_EXTRA_FILES) $(CROSS_LIB_PATH)/rand/rand_lcc1802_devkit_include.c \
	$(SOURCE_PATH)/../full_combo_rand.c > $(SOURCE_PATH)/../reduced_full_lcc1802_micro_combo.c


clean_combo_files:
	rm -rf $(SOURCE_PATH)/../full_combo_rand.c
	rm -rf $(SOURCE_PATH)/../full_lcc1802_combo.c
	rm -rf $(SOURCE_PATH)/../reduced_full_lcc1802_combo.c
	rm -rf $(SOURCE_PATH)/../reduced_full_lcc1802_color_combo.c
	rm -rf $(SOURCE_PATH)/../reduced_full_lcc1802_micro_combo.c


LCC1802_COLOR_BASIC_C_OPTS ?= \
	-D__LCC1802__ \
	-D__NO_SCREEN_COLOR_INIT \
	-D__COMX_COLOR_GRAPHICS \
	-D__ALT_PRINT

LCC1802_BASIC_C_OPTS ?= \
	-D__LCC1802__ \
	-D__NO_SCREEN_COLOR_INIT \
	-D__MEMORY_MAPPED_GRAPHICS \
	-D__ALT_PRINT


LCC1802_C_OPTS ?= \
	$(LCC1802_BASIC_C_OPTS) \
	 \
	-D__ALT_SLEEP \


LCC1802_C_OPTS_NO_SOUNDS ?= \
	$(LCC1802_BASIC_C_OPTS) \
	-D__ALT_SLEEP \

REDUCED_LCC1802_C_OPTS ?= \
	$(LCC1802_BASIC_C_OPTS) \
	-D_XL_NO_SLEEP

PIXIE_C_OPTS ?= \
	-D__LCC1802__ \
	-D__NO_SCREEN_COLOR_INIT \
	-D__NO_PRINT \
	-D__NO_SLEEP

LCC1802_COLOR_C_OPTS ?= \
	$(LCC1802_COLOR_BASIC_C_OPTS) \
	-D__ALT_SLEEP


LCC1802_COLOR_C_OPTS_NO_SOUNDS ?= \
	$(LCC1802_COLOR_BASIC_C_OPTS) \
	-D__ALT_SLEEP

REDUCED_LCC1802_COLOR_C_OPTS ?= \
	$(LCC1802_COLOR_BASIC_C_OPTS) \
	-D_XL_NO_SLEEP

MICRO_COLOR_REDUCED_EXTRA_FILES ?= \
	$(CROSS_LIB_PATH)/display/init_graphics/lcc1802/comx/micro_color_init_graphics.c \
	$(CROSS_LIB_PATH)/display/alt_print/comx_alt_print.c 

MICRO_COLOR_EXTRA_FILES ?= \
	$(MICRO_COLOR_REDUCED_EXTRA_FILES) \
	$(CROSS_LIB_PATH)/sound/lcc1802/comx/comx_sounds.c

MICRO_COLOR_EXTRA_FILES_WTIH_END_SCREEN ?= \
	$(MICRO_COLOR_EXTRA_FILES) 

###############################################################################
# COMX

_full_comx: _comx


_comx_buffered: reduced_full_lcc1802_color_combo.c $(ASSETS_PATH)/6x9_chars.h
	$(LCC1802) $(INCLUDE_OPTS) -I$(SOURCE_PATH) $(COMX_OPTS)  \
	-D__COMX__  $(COMX_GAME_OPTS) \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_COMX_SLOWDOWN) \
	$(LCC1802_COLOR_C_OPTS) \
	$(SOURCE_PATH)/../reduced_full_lcc1802_color_combo.c
	# rm -rf $(SOURCE_PATH)/../reduced_full_lcc1802_color_combo.c
	mv $(SOURCE_PATH)/../../a.hex $(BUILD_PATH)/X$(GAME_NAME)_$@.hex

comx_buffered: \
    _comx_buffered \
    clean_combo_files

# -D__LCC1802_UNBUFFERED
_comx: reduced_full_lcc1802_color_combo.c $(ASSETS_PATH)/6x9_chars.h
	$(LCC1802) $(INCLUDE_OPTS) -I$(SOURCE_PATH) $(COMX_OPTS) -D__LCC1802_UNBUFFERED  \
	-D__COMX__  $(COMX_GAME_OPTS) \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_COMX_SLOWDOWN) \
	$(LCC1802_COLOR_C_OPTS) \
	$(SOURCE_PATH)/../reduced_full_lcc1802_color_combo.c
	# rm -rf $(SOURCE_PATH)/../reduced_full_lcc1802_color_combo.c
	mv $(SOURCE_PATH)/../../a.hex $(BUILD_PATH)/X$(GAME_NAME)_$@.hex

comx: \
    _comx \
    clean_combo_files


_vip: reduced_full_lcc1802_color_combo.c $(ASSETS_PATH)/4x4_chars.h
	$(LCC1802) $(INCLUDE_OPTS) -I$(SOURCE_PATH) $(PIXIE_4K_OPTS)  \
	-D__VIP__  $(VIP_GAME_OPTS) \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_VIP_SLOWDOWN) \
	$(PIXIE_C_OPTS) \
	$(SOURCE_PATH)/../reduced_full_lcc1802_color_combo.c
	mv $(SOURCE_PATH)/../../a.hex $(BUILD_PATH)/X$(GAME_NAME)_$@.hex

vip: \
    _vip \
    clean_combo_files


# Interrupt-driver graphics
_comx_int: reduced_full_lcc1802_color_combo.c $(ASSETS_PATH)/6x9_chars.h
	$(LCC1802) $(INCLUDE_OPTS) -I$(SOURCE_PATH) $(COMX_OPTS) -DVIS_INT  \
	-D__COMX__  \
	$(COMX_GAME_OPTS) \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_COMX_SLOWDOWN) \
	$(LCC1802_COLOR_C_OPTS) \
	$(SOURCE_PATH)/../reduced_full_lcc1802_color_combo.c
	# rm -rf $(SOURCE_PATH)/../reduced_full_lcc1802_color_combo.c
	mv $(SOURCE_PATH)/../../a.hex $(BUILD_PATH)/X$(GAME_NAME)_$@.hex

comx_int: \
    _comx_int \
    clean_combo_files


_comx_ntsc: reduced_full_lcc1802_color_combo.c $(ASSETS_PATH)/6x8_chars.h
	$(LCC1802) $(INCLUDE_OPTS) -I$(SOURCE_PATH) $(COMX_OPTS)  \
	-D__COMX__  -DNTSC $(COMX_GAME_OPTS) \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_COMX_SLOWDOWN) \
	$(LCC1802_COLOR_C_OPTS) \
	$(SOURCE_PATH)/../reduced_full_lcc1802_color_combo.c
	# rm -rf $(SOURCE_PATH)/../reduced_full_lcc1802_color_combo.c
	mv $(SOURCE_PATH)/../../a.hex $(BUILD_PATH)/X$(GAME_NAME)_$@.hex

comx_ntsc: \
    _comx_ntsc \
    clean_combo_files

###############################################################################
# MICRO


_micro_pal2: reduced_full_lcc1802_micro_combo.c $(ASSETS_PATH)/6x9_chars.h
	$(LCC1802) $(INCLUDE_OPTS) -I$(SOURCE_PATH) $(MICROBOARD_PAL_2_OPTS)  \
	-D__MICRO__ \
	-D__COMX_COLOR_GRAPHICS  \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_MICRO_SLOWDOWN) \
	$(MICRO_GAME_OPTS)  \
	$(LCC1802_COLOR_C_OPTS) \
	$(SOURCE_PATH)/../reduced_full_lcc1802_micro_combo.c
	# rm -rf $(SOURCE_PATH)/../reduced_full_lcc1802_micro_combo.c
	mv $(SOURCE_PATH)/../../a.hex $(BUILD_PATH)/X$(GAME_NAME)_$@.hex

_micro_pal1: reduced_full_lcc1802_micro_combo.c $(ASSETS_PATH)/6x8_chars.h
	$(LCC1802) $(INCLUDE_OPTS) -I$(SOURCE_PATH) $(MICROBOARD_PAL_1_OPTS)  \
	-D__MICRO__ \
	-D__COMX_COLOR_GRAPHICS  \
	$(MICRO_GAME_OPTS)  \
	 \
	$(LCC1802_COLOR_C_OPTS) \
	$(SOURCE_PATH)/../reduced_full_lcc1802_micro_combo.c
	# rm -rf $(SOURCE_PATH)/../reduced_full_lcc1802_micro_combo.c
	mv $(SOURCE_PATH)/../../a.hex $(BUILD_PATH)/X$(GAME_NAME)_$@.hex


_micro_ntsc1: reduced_full_lcc1802_micro_combo.c $(ASSETS_PATH)/6x8_chars.h
	$(LCC1802) $(INCLUDE_OPTS) -I$(SOURCE_PATH) $(MICROBOARD_NTSC1_OPTS)  \
	-D__MICRO__ -DNTSC \
	-D__COMX_COLOR_GRAPHICS  \
	$(MICRO_GAME_OPTS)  \
	 \
	$(LCC1802_COLOR_C_OPTS) \
	$(SOURCE_PATH)/../reduced_full_lcc1802_micro_combo.c
	# rm -rf $(SOURCE_PATH)/../reduced_full_lcc1802_micro_combo.c
	mv $(SOURCE_PATH)/../../a.hex $(BUILD_PATH)/X$(GAME_NAME)_$@.hex


micro_pal1: \
    _micro_pal1 \
    clean_combo_files
    
micro_ntsc1: \
    _micro_ntsc1 \
    clean_combo_files

micro_pal2: \
    _micro_pal2 \
    clean_combo_files

_micro: _micro_pal2

micro: \
    _micro \
    clean_combo_files

###############################################################################
# PECOM


_full_pecom: _pecom

_pecom: reduced_full_lcc1802_color_combo.c $(ASSETS_PATH)/6x9_chars.h
	$(LCC1802) $(INCLUDE_OPTS) -I$(SOURCE_PATH) $(PECOM_OPTS)  \
	-D__PECOM__  $(PECOM_GAME_OPTS) \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_PECOM_SLOWDOWN) \
	$(PECOM_GAME_OPTS)  \
	$(LCC1802_COLOR_C_OPTS) \
	$(SOURCE_PATH)/../reduced_full_lcc1802_color_combo.c
	# rm -rf $(SOURCE_PATH)/../reduced_full_lcc1802_color_combo.c
	mv $(SOURCE_PATH)/../../a.hex $(BUILD_PATH)/X$(GAME_NAME)_$@.hex

pecom: \
    _pecom \
    clean_combo_files

###############################################################################
# TMC600


_full_tmc600: _tmc600_37k
_tmc600: _tmc600_37k

# -savetemps -S
_tmc600_37k: full_lcc1802_combo.c 
	$(LCC1802) $(INCLUDE_OPTS) -I$(SOURCE_PATH) $(TMC600_OPTS)  \
	-D__TMC600__   $(TMC600_GAME_OPTS) \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_TMC600_SLOWDOWN) \
	-D_XL_NO_UDG \
	$(LCC1802_C_OPTS) \
	$(SOURCE_PATH)/../full_lcc1802_combo.c
	mv $(SOURCE_PATH)/../../a.hex $(BUILD_PATH)/X$(GAME_NAME)_tmc600_37k.hex

tmc600: \
    _tmc600 \
    clean_combo_files

###############################################################################
# CIDELSA DRACO


_cidelsa: _cidelsa_draco

_cidelsa_draco: _cidelsa_draco_32k

_cidelsa_draco_32k: reduced_full_lcc1802_color_combo.c
	$(LCC1802) $(INCLUDE_OPTS) -I$(SOURCE_PATH) $(DRACO_32K_OPTS)  \
	-D__CIDELSA__ -D__DRACO__  \
	-D_XL_NO_COLOR -D_XL_NO_UDG \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_CIDELSA_SLOWDOWN) \
	$(LCC1802_COLOR_C_OPTS) \
	$(SOURCE_PATH)/../reduced_full_lcc1802_color_combo.c
	mv $(SOURCE_PATH)/../../a.hex $(BUILD_PATH)/X$(GAME_NAME)_$@.hex

cidelsa: \
    _cidelsa \
    clean_combo_files

###############################################################################


comx_targets: comx comx_ntsc

pecom_targets: pecom

tmc600_targets: tmc600_37k

cidelsa_targets: $(MAKE) cidelsa_draco_32k




###############################################################################################


mc10:
	cc68 -tmc10  $(CC6303_MC10_OPTS) $(INCLUDE_OPTS) $(GLOBAL_OPTS) \
	-D__MC10__ \
	$(MC10_COLORS) \
	-DXSize=32 \
	-DYSize=16 \
	-D__MEMORY_MAPPED_GRAPHICS -D_XL_NO_JOYSTICK \
	-D_XL_NO_COLOR -D__TARGET_SPECIFIC_ASCII \
	-D__ALT_SLEEP -D__ALT_RAND \
	-D__NO_INIT_GRAPHICS \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_MC10_SLOWDOWN) \
	-D__DEFAULT_CLEAR_SCREEN -D__ALT_PRINT  \
	$(CROSS_LIB_PATH)/sound/generic/bit_bang_sounds.c \
	$(FULL_FILES) \
	$(CROSS_LIB_PATH)/rand/rand.c \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	-o xbin
	rm xbin
	mv xbin.c10 $(BUILD_PATH)/X$(GAME_NAME)_$@.c10



# ------------------------------------------------------------------------------------------
# VBCC
#



vbcc_targets: \
	bbc_buffered



###############################################################################################
# GCC
#


ncurses_targets: \
	ncurses
    

GCC_OPTS = $(GLOBAL_OPTS) $(NATIVE_MAKEFILE_COMPILATION_OPTS)    
    
###############################################################################################


ncurses_sized:
	$(NATIVE_CC) $(GCC_OPTS) $(INCLUDE_OPTS) -D__NCURSES__ \
	 -DXSize=$(XSIZE) -DYSize=$(YSIZE) \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_NCURSES_SLOWDOWN) \
	-D__CONIO_GRAPHICS -D_XL_NO_UDG -D_XL_NO_JOYSTICK \
	-D__ALT_PRINT \
	$(NCURSES_GAME_OPTS) \
	$(CROSS_LIB_PATH)/display/alt_print/ncurses_alt_print.c \
	$(CROSS_LIB_PATH)/display/init_graphics/gcc/ncurses_init_graphics.c \
	$(FULL_FILES) \
	-lncurses
	mv a$(COMPILEDEXT) $(BUILD_PATH)/X$(GAME_NAME)_ncurses_$(XSIZE)X$(YSIZE)$(COMPILEDEXT)


ncurses:
	$(NATIVE_CC) $(GCC_OPTS) $(INCLUDE_OPTS) -D__NCURSES__ \
	 \
	-D_XL_SLOW_DOWN_FACTOR=$(_COMMON_SLOWDOWN_FACTOR)*$(_NCURSES_SLOWDOWN) \
	-D__CONIO_GRAPHICS -D_XL_NO_UDG -D_XL_NO_JOYSTICK \
	-D__ALT_PRINT \
	$(NCURSES_GAME_OPTS) \
	$(CROSS_LIB_PATH)/display/alt_print/ncurses_alt_print.c \
	$(CROSS_LIB_PATH)/display/init_graphics/gcc/ncurses_init_graphics.c \
	$(FULL_FILES) \
	-lncurses \
	-o $(BUILD_PATH)/X$(GAME_NAME)_ncurses$(COMPILEDEXT)
    
##


stdio_buffered: stdio
# 
stdio:
	$(NATIVE_CC) $(GCC_OPTS) $(INCLUDE_OPTS) \
	-D__STDIO $(STDIO_GAME_OPTS) \
	-D_XL_NO_JOYSTICK \
	-DXSize=32 -DYSize=24 \
	-D_XL_NO_COLOR \
	$(NCURSES_GAME_OPTS) \
	-D_XL_TURN_BASED \
	-D__BUFFERED_GRAPHICS \
	-D__NO_INIT_GRAPHICS \
	-D__ALT_PRINT \
	-D__DEFAULT_CLEAR_SCREEN \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	$(FULL_FILES) \
	-o $(BUILD_PATH)/X$(GAME_NAME)_$@$(COMPILEDEXT)

stdio_sized:
	$(NATIVE_CC) $(GCC_OPTS) $(INCLUDE_OPTS) \
	-DXSize=$(XSIZE) -DYSize=$(YSIZE) \
	-D__STDIO $(STDIO_GAME_OPTS) \
	-D_XL_NO_JOYSTICK \
	-D_XL_NO_COLOR \
	$(NCURSES_GAME_OPTS) \
	-D_XL_TURN_BASED \
	-D__BUFFERED_GRAPHICS \
	-D__NO_INIT_GRAPHICS \
	-D__ALT_PRINT \
	-D__DEFAULT_CLEAR_SCREEN \
	$(CROSS_LIB_PATH)/display/alt_print/memory_mapped_alt_print.c \
	$(FULL_FILES)
	mv a$(COMPILEDEXT) $(BUILD_PATH)/X$(GAME_NAME)_stdio_$(XSIZE)X$(YSIZE)$(COMPILEDEXT)


################
# Experimental targets

# CC65
include makefiles.common/targets/cc65/Makefile_c128_8502
include makefiles.common/targets/cc65/Makefile_cx16
include makefiles.common/targets/cc65/Makefile_osic1p
include makefiles.common/targets/cc65/Makefile_telestrat



# Z88DK
include makefiles.common/targets/z88dk/Makefile_abc80
include makefiles.common/targets/z88dk/Makefile_abc800
include makefiles.common/targets/z88dk/Makefile_alphatro
include makefiles.common/targets/z88dk/Makefile_altair8800
include makefiles.common/targets/z88dk/Makefile_attache
include makefiles.common/targets/z88dk/Makefile_aussie
include makefiles.common/targets/z88dk/Makefile_bic
include makefiles.common/targets/z88dk/Makefile_bit90
include makefiles.common/targets/z88dk/Makefile_bondwell
include makefiles.common/targets/z88dk/Makefile_bondwell2
include makefiles.common/targets/z88dk/Makefile_coleco_adam
include makefiles.common/targets/z88dk/Makefile_corvette
include makefiles.common/targets/z88dk/Makefile_dai
include makefiles.common/targets/z88dk/Makefile_dmv
include makefiles.common/targets/z88dk/Makefile_eg2k
include makefiles.common/targets/z88dk/Makefile_enterprise
include makefiles.common/targets/z88dk/Makefile_excalibur64
include makefiles.common/targets/z88dk/Makefile_fp1100
include makefiles.common/targets/z88dk/Makefile_g800
include makefiles.common/targets/z88dk/Makefile_gemini
include makefiles.common/targets/z88dk/Makefile_gl4000
include makefiles.common/targets/z88dk/Makefile_gl6000sl
include makefiles.common/targets/z88dk/Makefile_hemc
include makefiles.common/targets/z88dk/Makefile_hgmc
include makefiles.common/targets/z88dk/Makefile_homelab
include makefiles.common/targets/z88dk/Makefile_homelab2
include makefiles.common/targets/z88dk/Makefile_kaypro
include makefiles.common/targets/z88dk/Makefile_kaypro83
include makefiles.common/targets/z88dk/Makefile_kramermc
include makefiles.common/targets/z88dk/Makefile_krokha
include makefiles.common/targets/z88dk/Makefile_lambda
include makefiles.common/targets/z88dk/Makefile_lm80c
include makefiles.common/targets/z88dk/Makefile_m5
include makefiles.common/targets/z88dk/Makefile_mbc200
include makefiles.common/targets/z88dk/Makefile_micro8085
include makefiles.common/targets/z88dk/Makefile_mikro80
include makefiles.common/targets/z88dk/Makefile_multi8
include makefiles.common/targets/z88dk/Makefile_myvision
include makefiles.common/targets/z88dk/Makefile_mz2500
include makefiles.common/targets/z88dk/Makefile_nascom
include makefiles.common/targets/z88dk/Makefile_nc100
include makefiles.common/targets/z88dk/Makefile_nc200
include makefiles.common/targets/z88dk/Makefile_newbrain
include makefiles.common/targets/z88dk/Makefile_ondra
include makefiles.common/targets/z88dk/Makefile_osborne1
include makefiles.common/targets/z88dk/Makefile_osca
include makefiles.common/targets/z88dk/Makefile_oz
include makefiles.common/targets/z88dk/Makefile_p2000
include makefiles.common/targets/z88dk/Makefile_pasopia7
include makefiles.common/targets/z88dk/Makefile_pc6001
include makefiles.common/targets/z88dk/Makefile_pcw40
include makefiles.common/targets/z88dk/Makefile_pcw80
include makefiles.common/targets/z88dk/Makefile_pencil2
include makefiles.common/targets/z88dk/Makefile_pmd85
include makefiles.common/targets/z88dk/Makefile_pps
include makefiles.common/targets/z88dk/Makefile_primo
include makefiles.common/targets/z88dk/Makefile_pv1000
include makefiles.common/targets/z88dk/Makefile_pv2000
include makefiles.common/targets/z88dk/Makefile_px4
include makefiles.common/targets/z88dk/Makefile_px8
include makefiles.common/targets/z88dk/Makefile_qc10
include makefiles.common/targets/z88dk/Makefile_radio86
include makefiles.common/targets/z88dk/Makefile_rc700
include makefiles.common/targets/z88dk/Makefile_rx78
include makefiles.common/targets/z88dk/Makefile_smc777
include makefiles.common/targets/z88dk/Makefile_sol20
include makefiles.common/targets/z88dk/Makefile_sos
include makefiles.common/targets/z88dk/Makefile_spc1000
include makefiles.common/targets/z88dk/Makefile_special
include makefiles.common/targets/z88dk/Makefile_srr
include makefiles.common/targets/z88dk/Makefile_super80
include makefiles.common/targets/z88dk/Makefile_super80r
include makefiles.common/targets/z88dk/Makefile_sv8000
include makefiles.common/targets/z88dk/Makefile_svi
include makefiles.common/targets/z88dk/Makefile_ti82
include makefiles.common/targets/z88dk/Makefile_ti83
include makefiles.common/targets/z88dk/Makefile_ti85
include makefiles.common/targets/z88dk/Makefile_ti86
include makefiles.common/targets/z88dk/Makefile_ti83p
include makefiles.common/targets/z88dk/Makefile_tiki100
include makefiles.common/targets/z88dk/Makefile_tim011
include makefiles.common/targets/z88dk/Makefile_ts2068
include makefiles.common/targets/z88dk/Makefile_tvc
include makefiles.common/targets/z88dk/Makefile_v1050
include makefiles.common/targets/z88dk/Makefile_vector06c
include makefiles.common/targets/z88dk/Makefile_x1
include makefiles.common/targets/z88dk/Makefile_x820
include makefiles.common/targets/z88dk/Makefile_z80tvgame
include makefiles.common/targets/z88dk/Makefile_z88
include makefiles.common/targets/z88dk/Makefile_zx80
include makefiles.common/targets/z88dk/Makefile_zxn

# GCC4TI
include makefiles.common/targets/gcc4ti/Makefile_ti99


# VBCC
include makefiles.common/targets/vbcc/Makefile_amiga
include makefiles.common/targets/vbcc/Makefile_atari_jaguar
include makefiles.common/targets/vbcc/Makefile_bbc
include makefiles.common/targets/vbcc/Makefile_bbcmaster
include makefiles.common/targets/vbcc/Makefile_m65

# ATARI_MINT_GCC
include makefiles.common/targets/atari_mint_gcc/Makefile_atari_st


# TODO: Fix and improve these targets
# ACK
include makefiles.common/targets/ack/Makefile.ack_targets



########################################################################
# Extras

# Z88DK Extras
include makefiles.common/targets/z88dk/extras/Makefile_agon
include makefiles.common/targets/z88dk/extras/Makefile_bee
include makefiles.common/targets/z88dk/extras/Makefile_camputers_lynx
include makefiles.common/targets/z88dk/extras/Makefile_gal
include makefiles.common/targets/z88dk/extras/Makefile_gal_plus
include makefiles.common/targets/z88dk/extras/Makefile_c128
include makefiles.common/targets/z88dk/extras/Makefile_cpc
include makefiles.common/targets/z88dk/extras/Makefile_pc88


z88dk_experimental_targets: \
abc80 \
abc800 \
alphatro \
altair8800 \
attache \
aussie \
bic \
bit90 \
bondwell \
bondwell2 \
coleco_adam \
corvette \
dai \
dmv \
eg2k \
enterprise \
excalibur64 \
fp1100 \
g800 \
gemini \
gl4000 \
gl6000sl \
hemc \
hgmc \
homelab \
homelab2 \
kaypro \
kaypro83 \
kramermc \
krokha \
lambda \
lm80c \
m5 \
mbc200 \
micro8085 \
mikro80 \
multi8 \
myvision \
mz2500 \
nascom \
nc100 \
nc200 \
newbrain \
ondra \
osborne1 \
osca \
oz \
p2000 \
pasopia7 \
pc6001 \
pc88 \
pcw40 \
pcw80 \
pencil2 \
pmd85 \
pps \
primo \
pv1000 \
pv2000 \
px4 \
px8 \
qc10 \
radio86 \
rc700 \
rx78 \
smc777 \
sol20 \
sos \
spc1000 \
special \
srr \
super80 \
super80r \
sv8000 \
svi \
ti82 \
ti83 \
ti85 \
ti86 \
ti83p \
tiki100 \
tim011 \
ts2068 \
tvc \
v1050 \
vector06c \
x1 \
x820 \
z80tvgame \
z88 \
zx80 \
zxn


